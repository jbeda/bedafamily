//::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
// Copyright Zoomify, Inc., 1999-2012. All rights reserved.
// You may use this file on private and public websites, for personal and commercial
// purposes, with or without modifications, so long as this notice is included. Redistribution
// via other means is not permitted without prior permission. Additional terms apply.
// For complete license terms please see the Zoomify License Agreement included with
// this product and available on the Zoomify website at www.zoomify.com.
//::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
// The functions below are listed in groups in the following order: Initialization, ZoomifyImageViewer,
// ZoomifyViewport, ZoomifyToolbar, ZoomifyNavigator, NetConnector, and Utils.  Within each
// group the functions appear in the order in which they are first called.  Each group serves as a
// component with its own global variables and functions for sizing, positioning, and interaction.
// Shared variables global at the scope of the Zoomify Image Viewer are declared in a single 'Z'
// object which provides easy access while preventing naming conflicts with other code sources.
(function(){var a=function(){return this}.call();a.Z={}})(),Z.showImage=function(a,b,c){Z.Utils.addCrossBrowserPrototypes(),Z.Utils.addCrossBrowserMethods(),Z.Utils.addCrossBrowserEvents(),Z.Utils.declareGlobals(),Z.pageContainerID=a,Z.imagePath=Z.Utils.removeTrailingSlashCharacters(b),Z.parameters=Z.Utils.parseParameters(c),Z.Utils.addEventListener(document,"DOMContentLoaded",Z.initialize),Z.Utils.addEventListener(window,"load",Z.initialize)},Z.initialize=function(){arguments.callee.done||(arguments.callee.done=!0,Z.Utils.detectBrowserInfo(),Z.Utils.setParameters(Z.parameters),Z.Viewer=new Z.ZoomifyImageViewer,Z.Utils.isStrVal(Z.copyrightPath)?Z.Utils.enforceCopyright():Z.Viewer.configureViewer(),Z.debug&&Z.Utils.trace(Z.Utils.getResource("DEFAULT_TRACEDISPLAYDEBUGINFOTEXT")))},Z.ZoomifyImageViewer=function(){Z.ViewerDisplay=Z.Utils.createContainerElement("div","ViewerDisplay","inline-block","relative","hidden","100%","100%","0px","0px","none","0px","transparent none","0px","0px","pointer"),Z.pageContainer=document.getElementById(Z.pageContainerID);var a=Z.Utils.getElementStyle(Z.pageContainer);Z.viewerW=parseFloat(a.width),Z.viewerH=parseFloat(a.height),isNaN(Z.viewerW)&&(Z.viewerW=Z.ViewerDisplay.clientWidth),isNaN(Z.viewerH)&&(Z.viewerH=Z.ViewerDisplay.clientHeight),Z.pageContainer.innerHTML="",Z.pageContainer.appendChild(Z.ViewerDisplay),this.configureViewer=function(){Z.Viewport=new Z.ZoomifyViewport},this.configureComponents=function(){Z.toolbarVisible>0&&(Z.Toolbar=new Z.ZoomifyToolbar(Z.Viewport)),Z.navigatorVisible>0&&(Z.Navigator=new Z.ZoomifyNavigator(Z.Viewport)),Z.Navigator&&Z.Navigator.validateNavigatorGlobals()},this.setSizeAndPosition=function(a,b,c,d,e){Z.viewerW=a,Z.viewerH=b,Z.ViewerDisplay.style.width=a+"px",Z.ViewerDisplay.style.height=b+"px",Z.Viewport&&Z.Viewport.getInitialized()&&Z.Viewport.setSizeAndPosition(a,b,c,d);var f=Z.toolbarPosition==1?b-Z.toolbarH:0;Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&(Z.Toolbar.setSizeAndPosition(a,null,null,f),Z.toolbarVisible>1&&Z.Toolbar.show(!0)),Z.NavigatorDisplay&&Z.Navigator.getInitialized()&&(Z.Navigator.setSizeAndPosition(null,null,c,d,Z.navigatorFit),Z.navigatorVisible>1&&Z.Navigator.setVisibility(!0)),e&&Z.Viewport.updateView(!0)},this.setImagePath=function(a){Z.Viewport.zoomAndPanAllStop(!0),Z.imagePath=Z.Utils.removeTrailingSlashCharacters(a);var b=new Z.NetConnector,c=Z.Utils.cacheProofPath(Z.imagePath+"/"+"ImageProperties.xml");b.loadXML(c)}},Z.ZoomifyViewport=function(){function ce(){A=1,B=0,C=0,G=[],H=[],I=[],J=[],K=[],L=[],M=[],N=[],O=[],P=[],Q=[],R=[],S=0}function cf(){return b}function cg(a){b=a}function ch(){i=Z.Utils.createContainerElement("div","viewportContainer","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px"),Z.ViewerDisplay.appendChild(i),k=i,l=k.style,m=Z.Utils.createContainerElement(Z.useCanvas?"canvas":"div","viewportBackfillDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px"),i.appendChild(m),n=m,o=n.style,q=Z.Utils.createContainerElement(Z.useCanvas?"canvas":"div","viewportDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px"),i.appendChild(q),r=q,s=r.style,Z.Utils.isStrVal(Z.watermarkPath)&&(u=Z.Utils.createContainerElement("div","watermarkDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px"),i.appendChild(u),v=u,w=v.style),Z.Utils.isStrVal(Z.hotspotPath)&&(x=Z.Utils.createContainerElement("div","hotspotsDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px"),i.appendChild(x),y=x,z=y.style),Z.useCanvas?(p=n.getContext("2d"),t=r.getContext("2d")):(n.innerHTML="",r.innerHTML=""),v&&(v.innerHTML=""),y&&(y.innerHTML="")}function ci(a,b,c,d){c||(c=0),d||(d=0),$=a,_=b,bc=$*Y,bd=_*Y,be=bc/2,bf=bd/2,bg=-((bc-$)/2)+c,bh=(bc-$)/2+c,bi=-((bd-_)/2)+d,bj=(bd-_)/2+d,k.width=bc,k.height=bd,l.width=bc+"px",l.height=bd+"px",l.left=bg+"px",l.top=bi+"px",r.width=bc,r.height=bd,v&&(v.width=bc,v.height=bd,w.width=bc+"px",w.height=bd+"px"),Z.useCanvas&&(t.translate(be,bf),t.save())}function cj(){var a=Z.imageW,b=Z.imageH;while(a>d||b>d)a/=2,b/=2,A++;a=Z.imageW,b=Z.imageH;for(var c=A-1;c>=0;c--)I[c]=a,J[c]=b,K[c]=Math.ceil(I[c]/d),L[c]=Math.ceil(J[c]/d),M[c]=K[c]*L[c],a/=2,b/=2}function ck(){Z.initialX||(Z.initialX=Z.imageW/2),Z.initialY||(Z.initialY=Z.imageH/2);var a=cS();Z.fitZ&&Z.fitZ!=a&&(Z.initialZ==Z.fitZ&&(Z.initialZ=null),Z.minZ==Z.fitZ&&(Z.minZ=null),Z.maxZ==Z.fitZ&&(Z.maxZ=null),Z.fitZ=null),Z.fitZ||(Z.fitZ=a),Z.initialZ||(Z.initialZ=Z.fitZ),Z.minZ||(Z.minZ=Z.fitZ),Z.maxZ||(Z.maxZ=Z.fitZ),Z.initialZ<Z.minZ&&(Z.initialZ=Z.minZ),Z.initialZ>Z.maxZ&&(Z.initialZ=Z.maxZ)}function cl(){cm(X),A>U&&(cm(W),A>T&&cm(V)),H.sort(),H=Z.Utils.removeDups(H),ct(H,cK,0)}function cm(a){var b=K[a]-1,c=L[a]-1;for(var d=0;d<=c;d++)for(var e=0;e<=b;e++)H.push(a+"-"+e+"-"+d)}function cn(a,b){var c=(new Date).getTime(),d=bg-parseFloat(l.left),e=bi-parseFloat(l.top);l.left=bg+"px",l.top=bi+"px",Z.imageX=Z.imageX+d/Z.imageZ,Z.imageY=Z.imageY+e/Z.imageZ,cs(n,C,G,!1,!1),cs(r,B,P,!1,!1),cZ();var f=cx();a>0?f.right=f.left:a<0&&(f.left=f.right),b>0?f.bottom=f.top:b<0&&(f.top=f.bottom);for(var g=f.top;g<=f.bottom;g++)for(var h=f.left;h<=f.right;h++)R.push(B+"-"+h+"-"+g);var i=R.length;for(var j=0;j<i;j++){var k=R[j];if(k){var m=new cH(k);cJ(m,c,cL)}}i>30&&R.splice(i-30,30)}function co(){var a=!1;parseFloat(s.width)!=r.width&&(Z.useCanvas&&(s.width=r.width+"px",s.height=r.height+"px",s.left="0px",s.top="0px",t.restore(),t.save(),t.scale(D,D)),a=!0);if(parseFloat(l.left)!=bg||parseFloat(l.top)!=bi){var b=parseFloat(l.left)-bg,c=parseFloat(l.top)-bi;l.left=bg+"px",l.top=bi+"px",bm=parseFloat(o.left)+b,bn=parseFloat(o.top)+c,o.left=bm+"px",o.top=bn+"px";var d=cC(B,D);Z.imageX=Z.imageX-b/d,Z.imageY=Z.imageY-c/d,a=!0}a&&(cs(r,B,P,!0,!1),cZ())}function cp(){D!=E&&(Z.imageZ=bA),Z.imageZ<Z.minZ&&(Z.imageZ=Z.minZ);var a=e,b=A;while(a/2>=Z.imageZ)b--,a/=2;b=b-1<0?0:b-1;var c=cD(b,Z.imageZ);if(b!=B||c!=D)Z.useCanvas&&(t.restore(),t.save(),t.scale(c,c)),B=b,D=c;E=D}function cq(){C=B>T?V:B>U?W:X,F=cD(C,Z.imageZ),tierBackfillW=I[C],tierBackfillH=J[C],n.width=tierBackfillW,n.height=tierBackfillH;var a=tierBackfillW*F,b=tierBackfillH*F,c=Z.imageX*Z.imageZ,d=Z.imageY*Z.imageZ;bk=a,bl=b,bm=be-c,bn=bf-d,Z.useCanvas&&(o.width=bk+"px",o.height=bl+"px"),o.left=bm+"px",o.top=bn+"px"}function cr(){var a=cx();for(var b=a.top,c=a.bottom;b<=c;b++)for(var d=a.left,e=a.right;d<=e;d++)O.push(B+"-"+d+"-"+b);Q.sort(),O.sort(),Q=Z.Utils.removeDups(Q),O=Z.Utils.removeDups(O);var f=Z.Utils.intersect(O,Q);O=Z.Utils.subtract(O,Q),S=tilesLoadingNamesLength=O.length,Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&Z.Toolbar.showProgress(S,tilesLoadingNamesLength),Q=Z.Utils.subtract(Q,f),Q=Q.concat(f),tilesLoadingNamesLength!=0&&(N=[])}function cs(a,b,c,d,e){e||cu(a);if(d){var f=Math.floor(c.length/2);for(var g=f,h=c.length;g<h;g++){var i=c[g];i&&i.t==b&&cN(a,b,i);if(c.length-g-1!=g){var i=c[c.length-g-1];i&&i.t==b&&cN(a,b,i)}}}else for(var g=0,h=c.length;g<h;g++){var i=c[g];i&&i.t==b&&cN(a,b,i)}}function ct(a,b,c){if(a.length>0){var d=(new Date).getTime();if(c){var e=Math.floor(a.length/2);for(var f=e,g=a.length;f<g;f++){var h=a[f];if(h){var i=new cH(h);cJ(i,d,b)}if(a.length-f-1!=f){var h=a[a.length-f-1];if(h){var i=new cH(h);cJ(i,d,b)}}}}else for(var f=0,g=a.length;f<g;f++){var h=a[f];if(h){var i=new cH(h);cJ(i,d,b)}}}}function cu(a){if(a)if(Z.useCanvas&&a.tagName=="CANVAS"){var b=a.getContext("2d");b.save(),b.setTransform(1,0,0,1,0,0),b.clearRect(0,0,b.canvas.width,b.canvas.height),b.restore()}else if(a.hasChildNodes())while(a.childNodes.length>=1)a.removeChild(a.firstChild)}function cv(){if(Z.ToolbarDisplay&&Z.Toolbar.getInitialized()){var a=cC(B,D);Z.Toolbar.syncSliderToViewport(a)}}function cw(){Z.Navigator&&Z.Navigator.getInitialized()&&Z.Navigator.syncToViewport()}function cx(){return new cA(cy(),B)}function cy(){var a=parseFloat(l.left)-bg,b=parseFloat(l.top)-bi;if(Z.useCanvas){var c=parseFloat(l.width)/k.width;a/=c,b/=c}var d=cC(B,D);return a!=0&&(a/=d),b!=0&&(b/=d),new cB(Z.imageX-a,Z.imageY-b,-($/2),$/2,-(_/2),_/2,d)}function cz(){var a=parseFloat(l.left)-bg,b=parseFloat(l.top)-bi;if(Z.useCanvas){var c=parseFloat(l.width)/k.width;a/=c,b/=c}var d=cC(B,D);return a!=0&&(a/=d),b!=0&&(b/=d),new cB(Z.imageX-a,Z.imageY-b,-(bc/2),bc/2,-(bd/2),bd/2,d)}function cA(a,b){var c=cC(b,1),e=Math.floor(a.left*c/d),f=Math.floor(a.right*c/d),g=Math.floor(a.top*c/d),h=Math.floor(a.bottom*c/d);e<0&&(e=0),f>K[B]-1&&(f=K[B]-1),g<0&&(g=0),h>L[B]-1&&(h=L[B]-1),this.left=e,this.right=f,this.top=g,this.bottom=h}function cB(a,b,c,d,e,f,g){this.left=a+c/g,this.right=a+d/g,this.top=b+e/g,this.bottom=b+f/g}function cC(a,b){var c=b*(I[a]/Z.imageW);return c}function cD(a,b){var c=b/(I[a]/Z.imageW);return c}function cE(a,b){var c=a-Z.Utils.getElementPosition(Z.ViewerDisplay).x,d=b-Z.Utils.getElementPosition(Z.ViewerDisplay).y;return new Z.Utils.Point(c,d)}function cF(a,b){var c=parseFloat(l.left)+be,d=parseFloat(l.top)+bf,e=a-c,f=b-d,g=e/Z.imageZ,h=f/Z.imageZ,i=Z.imageX+g,j=Z.imageY+h;return new Z.Utils.Point(i,j)}function cG(a,b){var c=Z.imageX-a,d=Z.imageY-b,e=c*Z.imageZ,f=d*Z.imageZ,g=parseFloat(l.left)+be,h=parseFloat(l.top)+bf,i=g-e,j=h-f;return new Z.Utils.Point(i,j)}function cH(a){this.name=a,this.t=parseInt(a.substring(0,a.indexOf("-")),10),this.c=parseInt(a.substring(a.indexOf("-")+1,a.lastIndexOf("-")),10),this.r=parseInt(a.substring(a.lastIndexOf("-")+1),10),this.x=Math.floor(this.c*d),this.y=Math.floor(this.r*d),this.image=null,this.alpha=0,this.url=Z.Utils.cacheProofPath(cI(this.t,this.c,this.r,this.name)),this.elmt=null,this.style=null}function cI(a,b,d,e){var f=d*K[a]+b;for(var g=0;g<a;g++)f+=M[g];var h=Math.floor(f/c),i=Z.imagePath+"/"+"TileGroup"+h+"/"+e+".jpg";return i}function cJ(a,b,c){a.loading=cc.loadTileImage(a.url,Z.Utils.createCallback(null,c,a,b))}function cK(a,b,c){if(a&&b&&c){a.image=c;var d=a.name;G.push(a);var e=H.indexOf(d);e!=-1&&H.splice(e,1),a.alpha=1,a.t==C&&cN(n,C,a)}}function cL(a,b,c){if(a&&b&&c){a.image=c;var d=a.name;cN(r,B,a)}}function cM(a,b,c){if(a&&b&&c){a.image=c;var d=a.name;P.push(a),Q.push(d);var e=O.indexOf(d);e!=-1&&O.splice(e,1),N.push(a),bG||(bG=window.setInterval(cQ,50));var f=O.length;f==0&&(Z.useCanvas&&cs(r,B,P,!0,!1),Q.length>g&&cR(),S=0),Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&Z.Toolbar.showProgress(S,f)}}function cN(a,b,c){var d=c.x,e=c.y,f=cC(b,1);if(Z.useCanvas)a==r&&(d-=Z.imageX*f,e-=Z.imageY*f),cO(a,c,d,e);else{var g;a==r?(d-=Z.imageX*f-be/D,e-=Z.imageY*f-bf/D,g=D):g=F,cP(a,c,d,e,g)}}function cO(a,b,c,d){var e=a.getContext("2d");Z.alphaSupported&&b.alpha<1?(e.globalAlpha=b.alpha,e.drawImage(b.image,c,d),e.globalAlpha=1):e.drawImage(b.image,c,d)}function cP(a,b,c,d,e){b.elmt||(b.elmt=Z.Utils.createContainerElement("img"),b.elmt.onmousedown=Z.Utils.preventDefault,Z.Utils.addEventListener(b.elmt,"contextmenu",Z.Utils.preventDefault),b.elmt.src=b.url,b.style=b.elmt.style,b.style.position="absolute",Z.Utils.renderQuality(b,Z.renderQuality),Z.cssTransformsSupported&&(b.style[Z.cssTransformProperty+"Origin"]="0px 0px")),b.elmt.parentNode!=a&&a.appendChild(b.elmt);var f=b.style;f.display="none",Z.cssTransformsSupported?f[Z.cssTransformProperty]=["matrix(",(b.image.width/b.elmt.width*e).toFixed(8),",0,0,",(b.image.height/b.elmt.height*e).toFixed(8),",",(c*e).toFixed(8),Z.cssTransformNoUnits?",":"px,",(d*e).toFixed(8),Z.cssTransformNoUnits?")":"px)"].join(""):(f.width=b.image.width*e+"px",f.height=b.image.height*e+"px",f.left=c*e+"px",f.top=d*e+"px"),f.display="inline-block",Z.Utils.setOpacity(b,b.alpha)}function cQ(a){var b=N.length,c=0;for(var d=0;d<b;d++){var e=N[d];e.t==B&&(e.alpha<1?(bF==0&&(e.alpha=1),e.alpha+=bF,e.alpha>1&&(e.alpha=1),cN(r,B,e)):(c++,c>=b&&(window.clearInterval(bG),bG=null)))}}function cR(){var a=Q.length-g;for(var b=0;b<a;b++)j=Q.indexOf(P[b].name),j!=-1&&Q.splice(j,1),P.splice(b,1)}function cS(){return Z.imageW/Z.imageH>$/_?$/Z.imageW:_/Z.imageH}function cT(a,b){if(Z.constrainPan){var c=new cB(a,b,-($/2),$/2,-(_/2),_/2,Z.imageZ),d=c.left,e=c.right,f=c.top,g=c.bottom;Z.imageW*Z.imageZ>$?d<0?a=$/2/Z.imageZ:e>Z.imageW&&(a=Z.imageW-$/2/Z.imageZ):a=Z.imageW/2,Z.imageH*Z.imageZ>_?f<0?b=_/2/Z.imageZ:g>Z.imageH&&(b=Z.imageH-_/2/Z.imageZ):b=Z.imageH/2}return new Z.Utils.Point(a,b)}function cU(a,b){if(Z.constrainPan){var c=cC(B,D),d=Z.imageX,e=Z.imageY,f=new cB(d,e,-($/2),$/2,-(_/2),_/2,c),g=f.left,h=f.right,i=f.top,j=f.bottom;Z.imageW*c>$?g<0?a+=g*c:h>Z.imageW&&(a-=(Z.imageW-h)*c):a+=(d-Z.imageW/2)*c,Z.imageH*c>_?i<0?b+=i*c:j>Z.imageH&&(b-=(Z.imageH-j)*c):b+=(e-Z.imageH/2)*c}return new Z.Utils.Point(a,b)}function cV(a,b){if(Z.constrainPan){var c=Z.imageX-(a-bg)/Z.imageZ,d=Z.imageY-(b-bi)/Z.imageZ,e=new cB(c,d,-($/2),$/2,-(_/2),_/2,Z.imageZ),f=e.left,g=e.right,h=e.top,i=e.bottom;Z.imageW*Z.imageZ>$?f<0?a+=f*Z.imageZ:g>Z.imageW&&(a-=(Z.imageW-g)*Z.imageZ):a+=(c-Z.imageW/2)*Z.imageZ,Z.imageH*Z.imageZ>_?h<0?b+=h*Z.imageZ:i>Z.imageH&&(b-=(Z.imageH-i)*Z.imageZ):b+=(d-Z.imageH/2)*Z.imageZ}return new Z.Utils.Point(a,b)}function cW(a){return a>Z.maxZ?a=Z.maxZ:a<Z.minZ&&(a=Z.minZ),a}function cX(){b$=new Image,b_=parseFloat(Z.Utils.getResource("DEFAULT_WATERMARKALPHA")),b$.url=Z.watermarkPath,b$.onload=cY,b$.onerror=c$,b$.src=Z.watermarkPath}function cY(){if(v){var a=parseFloat(Z.Utils.getResource("DEFAULT_WATERMARKMINSCALE")),b=parseFloat(Z.Utils.getResource("DEFAULT_WATERMARKSPANW")),c=parseFloat(Z.Utils.getResource("DEFAULT_WATERMARKSPANH")),d=cC(B,D),e=(Z.imageW*d-v.width)/2,f=(Z.imageH*d-v.height)/2,g=(Z.imageW/2-Z.imageX)*d,h=(Z.imageH/2-Z.imageY)*d,i=d<a?a:d,j=Math.round(Z.imageW/b),k=Math.round(Z.imageH/c),l=cz();wiScaledW=b$.width*i,wiScaledH=b$.height*i;var m=0,n=0;for(var o=1;o<=j;o++)for(var p=1;p<=k;p++){var q=Math.round(Z.imageW/(j+1)*o),r=Math.round(Z.imageH/(k+1)*p);if(q>l.left&&q<l.right&&r>l.top&&r<l.bottom){var s=Math.round(q*d-wiScaledW/2-e+g),t=Math.round(r*d-wiScaledH/2-f+h);if(Z.imageW>4e3){var u=m+100,w=n+100;if(s<u&&t<w)continue;m=s,n=t}var x=b$.cloneNode(!0);Z.Utils.setOpacity(x,b_),x.width=wiScaledW,x.height=wiScaledH;var y=Z.Utils.createContainerElement("div","wiC","inline-block","absolute","hidden",wiScaledW+"px",wiScaledH+"px",s+"px",t+"px","none","0px","transparent none","0px","0px");y.appendChild(x),v.appendChild(y),Z.Utils.addEventListener(x,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(x,"mousedown",Z.Utils.preventDefault)}}}}function cZ(){v&&(cu(v),cY())}function c$(){Z.Utils.showMessage(Z.Utils.getResource("ERROR_WATERMARKPATHINVALID")+this.url)}function c_(b,c,d){a.zoomAndPanAllStop(),Z.imageZ=cW(d);var e=cT(b,c);Z.imageX=e.x,Z.imageY=e.y,a.updateView(!0)}function da(){if(bC){dc(bw,bx,by,!1);if(bw!==0||bx!==0||by!==0)bC=window.setTimeout(da,bB)}}function db(){bP<bJ?(dc(bK,bL,bM,!0),bP++,bO=window.setTimeout(db,bI)):(D=bP*bM+cD(B,Z.imageZ),a.zoomAndPanAllStop(),a.toggleWatermarks(!0))}function dc(a,b,c,e){var f,g,h,i=!1,j=!1,k=!1;if(c!=0){var m=D*(1+c);e&&(m=D+c);var n=cC(B,m);h=cW(n);if(h!=Z.imageZ){var o=df(h);o&&(!e,j=!0,k=!0)}}if(a!=0||b!=0){var p=parseFloat(l.left)+a,q=parseFloat(l.top)+b,t=cV(p,q);f=t.x,g=t.y,l.left=f+"px",l.top=g+"px",i=!0,k=!0}var u=bz%2==0;u&&(cZ(),j&&cv(),k&&cw());if(i)var v=Z.useCanvas?parseFloat(s.width)/r.width:1,w=Math.round(d/bv*D*v),x=bz%w==0&&bz!=0}function dd(){bC&&(window.clearTimeout(bC),bC=null),bw=0,bx=0,by=0,bz=0}function de(){bO&&(window.clearTimeout(bO),bO=null)}function df(a){var b=!1,c=cD(B,a);if(c!=D){D=c,F=cD(C,a);var d=c/E,e=bc*d,f=bd*d,g=(bc-e)/2,h=(bd-f)/2;if(c<E){var i=cU(g,h);l.left=bg+i.x-g+"px",l.top=bi+i.y-h+"px"}if(Z.useCanvas)s.width=e+"px",s.height=f+"px",s.left=g+"px",s.top=h+"px",e=bk*d,f=bl*d,g=bm+Z.imageX*(1-d)*Z.imageZ,h=bn+Z.imageY*(1-d)*Z.imageZ,o.width=e+"px",o.height=f+"px",o.left=g+"px",o.top=h+"px";else{cs(r,B,P,!0,!1),tierBackfillW=I[C],tierBackfillH=J[C],n.width=tierBackfillW,n.height=tierBackfillH;var j=tierBackfillW*F,k=tierBackfillH*F,m=Z.imageX*a,p=Z.imageY*a;bm=be-m,bn=bf-p,o.left=bm+"px",o.top=bn+"px",cs(n,C,G,!1,!1)}b=!0}return b}function dg(a){a?(bY||dh(),bY.elmt.style.display="inline-block"):bY&&(bY.elmt.style.display="none")}function dh(){var a=Z.Utils.getResource("DEFAULT_FPCANCELBUTTONTEXT"),b=34,c=34,d=20,e=parseFloat(Z.viewerW)-(b+d),f=parseFloat(Z.viewerH)-(c+d),g=Z.Utils.getResource("DEFAULT_FPCANCELBUTTONCOLOR");bY=new Z.Utils.Button("buttonFPCancel",a,null,null,null,null,b+"px",c+"px",e+"px",f+"px","mousedown",di,"TIP_CANCELFULLPAGE","solid","1px",g,"0px","0px"),Z.ViewerDisplay.appendChild(bY.elmt)}function di(){a.toggleFullPageView(!1)}function dj(){Z.Utils.addEventListener(document,"keydown",dA),Z.Utils.addEventListener(document,"keyup",dB),Z.mobileDevice?(Z.Utils.addEventListener(k,"touchstart",dq),Z.Utils.addEventListener(k,"touchmove",dr),Z.Utils.addEventListener(k,"touchend",ds),Z.Utils.addEventListener(k,"touchcancel",dt),Z.Utils.addEventListener(k,"gesturestart",du),Z.Utils.addEventListener(k,"gesturechange",dv),Z.Utils.addEventListener(k,"gestureend",dw),document.getElementsByTagName("body")[0].onorientationchange=dz):(Z.Utils.addEventListener(Z.ViewerDisplay,"mouseover",dk),Z.Utils.addEventListener(Z.ViewerDisplay,"mouseout",dp),Z.Utils.addEventListener(Z.ViewerDisplay,"mousemove",Z.Utils.preventDefault),Z.Utils.addEventListener(k,"mousedown",dl),Z.Utils.addEventListener(k,"mousemove",Z.Utils.preventDefault)),Z.Utils.addEventListener(n,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(r,"contextmenu",Z.Utils.preventDefault),v&&Z.Utils.addEventListener(v,"contextmenu",Z.Utils.preventDefault),y&&Z.Utils.addEventListener(y,"contextmenu",Z.Utils.preventDefault)}function dk(a){var b=Z.Utils.nodeIsInViewer(Z.Utils.target(Z.Utils.event(a))),c=Z.Utils.nodeIsInViewer(Z.Utils.relatedTarget(a));if(!b||!c)Z.ToolbarDisplay&&Z.toolbarVisible>1&&Z.Toolbar.show(!0),Z.NavigatorDisplay&&Z.navigatorVisible>1&&Z.Navigator.setVisibility(!0),bp=null}function dl(a){if(Z.Utils.isRightMouseButton(a))return;bo=!0;var b=Z.Utils.getMousePosition(a);return bQ=new Z.Utils.Point(b.x,b.y),k.mouseXPrior=b.x,k.mouseYPrior=b.y,Z.Utils.addEventListener(document,"mousemove",dm),Z.Utils.addEventListener(k,"mouseup",dn),Z.Utils.addEventListener(document,"mouseup",dn),!1}function dm(b){if(!Z.mousePan)return;var b=Z.Utils.event(b),c=Z.Utils.getMousePosition(b),d=c.x-k.mouseXPrior,e=c.y-k.mouseYPrior;if(!isNaN(d)&&!isNaN(e)){var f=parseFloat(l.left)+d,g=parseFloat(l.top)+e,h=cV(f,g);l.left=h.x+"px",l.top=h.y+"px",k.mouseXPrior=c.x,k.mouseYPrior=c.y;if(Z.Navigator){var i=a.calculateCurrentCenterCoordinates(h);Z.Navigator.syncNavigatorRectanglePosition(i)}}return!1}function dn(b){bo=!1,document.mousemove=null,document.mouseup=null,Z.Utils.removeEventListener(document,"mousemove",dm),Z.Utils.removeEventListener(k,"mouseup",dn),Z.Utils.removeEventListener(document,"mouseup",dn);var b=Z.Utils.event(b),c=Z.Utils.getMousePosition(b),d;bp?d=bp:d=new Z.Utils.Point(c.x,c.y);var e=Math.sqrt(Math.pow(bQ.x-d.x,2)+Math.pow(bQ.y-d.y,2));if(e<4){var f=a.getClickZoomCoords3D(b,d,B,D);Z.clickZoom?a.zoomAndPanToView(f.x,f.y,f.z):Z.clickPan&&a.zoomAndPanToView(f.x,f.y,Z.imageZ)}else Z.mousePan&&a.updateView();bp&&(Z.ToolbarDisplay&&Z.toolbarVisible>1&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&Z.navigatorVisible>1&&Z.Navigator.setVisibility(!1))}function dp(a){var b=Z.Utils.nodeIsInViewer(Z.Utils.target(a)),c=Z.Utils.nodeIsInViewer(Z.Utils.relatedTarget(Z.Utils.event(a)));if(!b||!c)if(!bo)Z.ToolbarDisplay&&Z.toolbarVisible>1&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&Z.navigatorVisible>1&&Z.Navigator.setVisibility(!1);else{var d=Z.Utils.getMousePosition(a);bp=new Z.Utils.Point(d.x,d.y)}}function dq(a){var b=Z.Utils.getFirstTouch(a);if(b&&!bq){bs=!1;var c=b.target,d=new Z.Utils.Point(b.pageX,b.pageY);bQ=new Z.Utils.Point(d.x,d.y),k.mouseXPrior=d.x,k.mouseYPrior=d.y}}function dr(b){b.preventDefault();if(!Z.mousePan)return;var c=Z.Utils.getFirstTouch(b);if(c&&!bq&&!bs){var d=c.target,e=new Z.Utils.Point(c.pageX,c.pageY),f=e.x-k.mouseXPrior,g=e.y-k.mouseYPrior;if(!isNaN(f)&&!isNaN(g)){var h=parseFloat(l.left)+f,i=parseFloat(l.top)+g,j=cV(h,i);l.left=j.x+"px",l.top=j.y+"px",k.mouseXPrior=e.x,k.mouseYPrior=e.y;if(Z.Navigator){var m=a.calculateCurrentCenterCoordinates(j);Z.Navigator.syncNavigatorRectanglePosition(m)}}}return!1}function ds(b){if(!bq&&!bs){var c=!1,d=Z.Utils.getFirstTouch(b);if(d){var e=d.target,f=new Z.Utils.Point(d.pageX,d.pageY),g=new Z.Utils.Point(f.x,f.y),h=Math.sqrt(Math.pow(bQ.x-g.x,2)+Math.pow(bQ.y-g.y,2));if(h<4){var i=a.getClickZoomCoords3D(b,g,B,D);Z.clickZoom?a.zoomAndPanToView(i.x,i.y,i.z):Z.clickPan&&a.zoomAndPanToView(i.x,i.y,Z.imageZ)}else c=!0}else c=!0;c&&Z.mousePan&&a.updateView()}}function dt(b){if(!bq&&!bs){var c=!1,d=Z.Utils.getFirstTouch(b);if(d){var e=d.target,f=new Z.Utils.Point(d.pageX,d.pageY),g=new Z.Utils.Point(f.x,f.y),h=Math.sqrt(Math.pow(bQ.x-g.x,2)+Math.pow(bQ.y-g.y,2));if(h<4){var i=a.getClickZoomCoords3D(b,g,B,D);Z.clickZoom?a.zoomAndPanToView(i.x,i.y,i.z):Z.clickPan&&a.zoomAndPanToView(i.x,i.y,Z.imageZ)}else c=!0}else c=!0;c&&Z.mousePan&&a.updateView()}}function du(a){var a=Z.Utils.event(a);dv(a),bq||(bq=window.setInterval(dx,bt))}function dv(a){var a=Z.Utils.event(a);a.preventDefault(),br=Math.round(a.scale*100)/100}function dw(b){bq&&(window.clearInterval(bq),bs=!0,bq=null),Z.mousePan&&a.updateView()}function dx(a){if(!Z.mousePan)return;var b=dy(B,E,br),c=cW(b);b!=Z.imageZ&&df(c)}function dy(a,b,c){var d=b*c,e=cC(a,d);return e}function dz(b){Z.fullPage&&(Z.ToolbarDisplay&&Z.toolbarVisible>1&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&Z.navigatorVisible>1&&Z.Navigator.setVisibility(!1),a.toggleFullPageView(!1),a.toggleFullPageView(!0),Z.ToolbarDisplay&&Z.toolbarVisible>1&&Z.Toolbar.show(!0),Z.NavigatorDisplay&&Z.navigatorVisible>1&&Z.Navigator.setVisibility(!0))}function dA(b){if(!Z.keys)return;var b=Z.Utils.event(b);switch(b.keyCode){case 90:a.zoom("out");break;case 17:a.zoom("out");break;case 65:a.zoom("in");break;case 16:a.zoom("in");break;case 37:a.pan("left");break;case 38:a.pan("up");break;case 40:a.pan("down");break;case 39:a.pan("right");break;case 27:Z.fullPage?a.toggleFullPageView(!1):a.reset()}}function dB(b){if(!Z.keys)return;var b=Z.Utils.event(b),c=b.keyCode;c==90||c==17||c==65||c==16?a.zoom("stop"):c==37||c==39?a.pan("horizontalStop"):(c==38||c==40)&&a.pan("verticalStop")}var a=this,b=!1,c=256,d,e=parseFloat(Z.Utils.getResource("DEFAULT_TIERSMAXSCALEUP")),f=e/2,g=parseInt(Z.Utils.getResource("DEFAULT_TILESMAXCACHE"),10),h=Z.toolbarVisible==1?Z.toolbarH:0,i,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;ch();var A=1,B=0,C=0,D,E,F,G=[],H=[],I=[],J=[],K=[],L=[],M=[],N=[],O=[],P=[],Q=[],R=[],S=0,T=parseInt(Z.Utils.getResource("DEFAULT_BACKFILLTHRESHOLD2"),10),U=parseInt(Z.Utils.getResource("DEFAULT_BACKFILLTHRESHOLD1"),10),V=parseInt(Z.Utils.getResource("DEFAULT_BACKFILLCHOICE2"),10),W=parseInt(Z.Utils.getResource("DEFAULT_BACKFILLCHOICE1"),10),X=parseInt(Z.Utils.getResource("DEFAULT_BACKFILLCHOICE0"),10),Y=parseInt(Z.Utils.getResource("DEFAULT_PANBUFFER"),10),$,_,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn;$=Z.viewerW,_=Z.viewerH,ba=bb=0,_-=h,Z.toolbarPosition==0&&(bb+=h);var bo=!1,bp=null,bq=null,br=null,bs=!1,bt=parseInt(Z.Utils.getResource("DEFAULT_GESTURETESTDURATION"),10),bu=parseFloat(Z.Utils.getResource("DEFAULT_ZOOMSTEP"))*Z.zoomSpeed;Z.mobileDevice&&(bu/=2);var bv=Math.round(parseFloat(Z.Utils.getResource("DEFAULT_PANSTEP"))*Z.panSpeed),bw=0,bx=0,by=0,bz=0,bA=0,bB=parseInt(Z.Utils.getResource("DEFAULT_ZOOMANDPANSTEPDURATION"),10),bC,bD,bE,bF=parseFloat(Z.Utils.getResource("DEFAULT_FADEINSTEP"))*Z.fadeInSpeed,bG,bH=parseInt(Z.Utils.getResource("DEFAULT_ZOOMANDPANTOVIEWDURATION"),10),bI=parseInt(Z.Utils.getResource("DEFAULT_ZOOMANDPANTOVIEWSTEPDURATION"),10),bJ=bH/bI,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ;if(Z.Utils.isStrVal(Z.watermarkPath))var b$,b_,ca=[],cb=[];ci($,_,ba,bb);var cc=new Z.NetConnector,cd=Z.Utils.cacheProofPath(Z.imagePath+"/"+"ImageProperties.xml");cc.loadXML(cd),this.initializeViewport=function(a,b,c){Z.imageW=a,Z.imageH=b,d=c,cj(),ck(),F=cD(C,Z.initialZ),D=cD(B,Z.initialZ),E=D,Z.useCanvas&&t.scale(D,D),v&&cX(),cl(),c_(Z.initialX,Z.initialY,Z.initialZ),dj(),cg(!0),Z.Viewer.configureComponents()},this.reinitializeViewport=function(a,b,c){cg(!1),ce(),Z.imageW=a,Z.imageH=b,d=c,cj(),ck(),F=cD(C,Z.initialZ),D=cD(B,Z.initialZ),E=D,Z.useCanvas&&(t.restore(),t.scale(D,D)),cl(),ci($,_,ba,bb),n&&cu(n),r&&cu(r),v&&cu(v),c_(Z.initialX,Z.initialY,Z.initialZ),cg(!0),Z.navigatorVisible>0&&Z.Navigator.setImagePath(Z.imagePath)},this.getInitialized=function(){return cf()},this.getW=function(){return bc},this.getH=function(){return bd},this.getTierCount=function(){return A},this.getTileSize=function(){return d},this.getTierCurrent=function(){return B},this.getTierScale=function(){return D},this.getTierScaleAsZoom=function(){var a=cC(B,D);return a},this.getTiersMaxScaleUp=function(){return e},this.getTiersMaxScaleDown=function(){return f},this.getTilesMaxCache=function(){return g},this.getTierWs=function(){return I.join(",")},this.getTierHs=function(){return J.join(", ")},this.getTierTileCounts=function(){return M.join(", ")},this.getTilesLoadingNames=function(){var a=O.join(", ")==""?"Current view loading complete":O.join(", ");return a},this.setSizeAndPosition=function(a,b,c,d){ci(a,b,c,d)},this.updateView=function(a){if(D!=E||Z.imageZ!=bA||parseFloat(l.left)!=bg||parseFloat(l.top)!=bi||a){co(),bA=cC(B,D);var c=!1;if(D!=E||Z.imageZ!=bA||!b||a)Z.imageZ<bA&&!a&&(c=!0),cp(),cq(),cs(n,C,G,!1,!1);cr(),cs(r,B,P,!0,c),ct(O,cM,0),cv(),cw()}},this.setView=function(a,b,c){if(a==undefined||a==null)a=Z.imageW/2;if(b==undefined||b==null)b=Z.imageH/2;c==undefined||c==null?c=Z.fitZ:c>1&&(c/=100),c_(a,b,c)},this.zoom=function(b){switch(b){case"out":by>=0&&(by-=bu);break;case"in":by<=0&&(by+=bu);break;case"stop":by=0}Z.zooming=by==0?"stop":by>0?"in":"out",by!=0?bC||((by<0&&Z.imageZ>Z.minZ||by>0&&Z.imageZ<Z.maxZ)&&a.toggleWatermarks(!1),Z.useCanvas||cu(v),bC=window.setTimeout(da,bB)):(a.zoomAndPanAllStop(),a.toggleWatermarks(!0))},this.pan=function(b){switch(b){case"left":bw<=0&&(bw+=bv);break;case"up":bx<=0&&(bx+=bv);break;case"down":bx>=0&&(bx-=bv);break;case"right":bw>=0&&(bw-=bv);break;case"horizontalStop":bw=0;break;case"verticalStop":bx=0;break;case"stop":bw=0,bx=0}Z.panningX=bw==0?"stop":bw>0?"left":"right",Z.panningY=bx==0?"stop":bx>0?"up":"down",bD=Z.imageX*cC(B,1),bE=Z.imageY*cC(B,1),bw!=0||bx!=0?bC||(a.toggleWatermarks(!0),Z.useCanvas||cu(v),bC=window.setTimeout(da,bB)):(a.zoomAndPanAllStop(),a.toggleWatermarks(!0))},this.zoomAndPanToView=function(b,c,d){a.zoomAndPanAllStop();var e=cG(b,c),f=be-e.x,g=bf-e.y,h=cD(B,d),i=cD(C,d),j=parseFloat(l.left)+f,k=parseFloat(l.top)+g,m=h-D,n=i-F;bK=j/bJ,bL=k/bJ,bM=m/bJ,bN=n/bJ,a.toggleWatermarks(!1),bP=0,bO=window.setTimeout(db,bI)},this.zoomAndPanAllStop=function(b){dd(),de(),b||a.updateView()},this.scaleTierToZoom=function(a){var b=df(a);b&&(cZ(),cw())},this.reset=function(){a.zoomAndPanToView(Z.initialX,Z.initialY,Z.initialZ)},this.toggleFullPageViewExternal=function(){bZ=!0,a.toggleFullPageView()},this.toggleFullPageView=function(b){a.zoomAndPanAllStop(),Z.fullPage=b?b:!Z.fullPage;var c=document.body,d=c.style,e=document.documentElement.style,f=Z.ViewerDisplay.style,g=null,h=null;if(Z.fullPage){bR=d.width,bS=d.height,bT=d.overflow,bU=e.overflow,bV=f.backgroundColor,bW=f.position,bX=f.zIndex;var i;Z.mobileDevice?(i=Z.Utils.getWindowSize(),d.width=i.x,d.height=i.y):(d.width="100%",d.height="100%"),d.overflow="hidden",e.overflow="hidden",f.backgroundColor=Z.Utils.getResource("DEFAULT_FULLPAGEBACKCOLOR"),f.position="fixed",f.zIndex="99999999",i=Z.Utils.getWindowSize(),g=i.x,h=i.y}else{d.width=bR,d.height=bS,d.overflow=bT,e.overflow=bU,f.backgroundColor=bV,f.position="relative",f.zIndex=bX;var j=Z.Utils.getElementStyle(Z.pageContainer);g=parseFloat(j.width),h=parseFloat(j.height),isNaN(g)&&(g=Z.ViewerDisplay.clientWidth),isNaN(h)&&(h=Z.ViewerDisplay.clientHeight),bZ=!1}Z.viewerW=g,Z.viewerH=h,ci(g,h),dg(bZ);if(Z.ToolbarDisplay&&Z.Toolbar.getInitialized()){Z.toolbarCurrentW=Z.toolbarW==-1?g:Z.toolbarW;var k=Z.toolbarPosition==1?Z.viewerH-Z.toolbarH:0;Z.Toolbar.setSizeAndPosition(Z.toolbarCurrentW,null,null,k)}Z.NavigatorDisplay&&Z.Navigator.getInitialized()&&Z.Navigator.setSizeAndPosition(Z.navigatorW,Z.navigatorH,Z.navigatorL-1,Z.navigatorT-1),ck(),Z.imageZ=cW(Z.imageZ);if(Z.constrainPan){var m=parseFloat(l.left),n=parseFloat(l.top),o=cV(m,n);l.left=o.x+"px",l.top=o.y+"px"}a.updateView(!0)},this.toggleBackfill=function(){var a=Z.ViewerDisplay.firstChild.childNodes[0].style;a.display=a.display=="none"?"inline-block":"none"},this.toggleDisplay=function(){var a=Z.ViewerDisplay.firstChild.childNodes[1].style;a.display=a.display=="none"?"inline-block":"none"},this.toggleWatermarks=function(a){if(w){var b=a?a:w.display!="inline-block";w.display=b?"inline-block":"none"}},this.toggleConstrainPan=function(){Z.constrainPan=!Z.constrainPan;if(Z.constrainPan){var b=parseFloat(s.left),c=parseFloat(s.top),d=cV(b,c);l.left=d.x+"px",l.top=d.y+"px",a.updateView()}},this.getClickZoomCoords3D=function(a,b,c,d){var e=parseFloat(Z.Utils.getResource("DEFAULT_CLICKZOOMTIERSKIPTHRESHOLD")),f=cE(b.x,b.y),g=cF(f.x,f.y),h=cC(c,d);return a.altKey?(d>1+e?h=cC(c,1):c>0&&(h=cC(c-1,1)),h-Z.fitZ<e&&(h=Z.fitZ)):d<1-e?h=cC(c,1):c<A-1&&(h=cC(c+1,1)),new Z.Utils.Point3D(g.x,g.y,h)},this.syncToNavigator=function(a,b){var c=-(a-Z.imageX),d=-(b-Z.imageY),e=c*Z.imageZ,f=d*Z.imageZ,g=e+bg,h=f+bi,i=cV(g,h);l.left=i.x+"px",l.top=i.y+"px"},this.calculateCurrentCenterCoordinates=function(a){if(!a)var a=new Z.Utils.Point(parseFloat(l.left),parseFloat(l.top));var b=a.x-bg,c=a.y-bi,d=b/Z.imageZ,e=c/Z.imageZ,f=Z.imageX-d,g=Z.imageY-e;return new Z.Utils.Point(f,g)}},Z.ZoomifyToolbar=function(a){function t(){window.clearInterval(p),p=null;var a=document.getElementById("progressTextBox").firstChild.firstChild.firstChild.firstChild;a&&(a.nodeValue="")}function u(){return c}function v(a){c=a}function w(a,b,c,d){a||(a=Z.toolbarVisible>0?Z.toolbarCurrentW:0),b||(b=Z.toolbarVisible>0?e:0),c||(c=0),d||(d=Z.toolbarPosition==1?Z.viewerH-e:0);var f=Z.ToolbarDisplay.style;f.width=a+"px",f.height=b+"px",f.left=c+"px",f.top=d+"px",x(a,b)}function x(a,b){var c=a,d=b,e=toolbarSkinSizes[2],f=toolbarSkinSizes[3],g=toolbarSkinSizes[4],h=toolbarSkinSizes[5],i=toolbarSkinSizes[6],j=toolbarSkinSizes[7],k=toolbarSkinSizes[8],l=toolbarSkinSizes[9],m=toolbarSkinSizes[10],n=toolbarSkinSizes[11],o=toolbarSkinSizes[12],p=toolbarSkinSizes[13],t=toolbarSkinSizes[14],u=toolbarSkinSizes[15],v=0,w=(d-f)/2+1,x=(d-h)/2,y=(d-j)/2,z=y*1.3,A=y+4,B=y+2,C=Z.logoVisible==1?0:k/2,D=Z.logoVisible==1?0:k/2,E=k-(i-g),F=Z.fullPageVisible?8:7,G=20,H=F*k+2*E;Z.sliderVisible&&(H+=p),q=r=s=!1;var I=Z.logoVisible==1?e+2:0,J=Z.toolbarVisible!=0&&Z.toolbarVisible!=1?k:0,K=I+J,L=K+G+H+G+t;L>c&&(q=!0,L-p>c&&(r=!0,L-p-t>c&&(s=!0,K=0),t=0),H-=p);var M=K+(c-t-K-H)/2,N=document.getElementById("background");N.style.width=c+"px",N.firstChild.style.width=c+400+"px",N.style.height=d+"px",N.firstChild.style.height=d+"px";var O=document.getElementById("buttonContainer");O.style.width=H+G*2+"px",O.style.height=d+"px",O.style.left=M-G+"px";var P=document.getElementById("buttonBackground");Z.Utils.graphicSize(P,parseFloat(O.style.
width),parseFloat(O.style.height)),P.style.left="0px";var Q=document.getElementById("toolbarLogo");if(Q){var R=Q.style;if(R)if(!s){R.display="inline-block",Z.Utils.graphicSize(Q,e,f),R.left=v+"px",R.top=w+"px",v+=e+2;var S=document.getElementById("logoDivider");if(S){Z.Utils.graphicSize(S,g,h);var T=S.style;T.left=v+"px",T.top=x+"px"}}else R.display="none"}if(Z.toolbarVisible!=0&&Z.toolbarVisible!=1){var U=document.getElementById("buttonMinimize"),V=document.getElementById("buttonExpand");if(U&&V){var W=U.style,X=V.style;W&&X&&(s?(W.display="none",X.display="none"):(W.display="inline-block",X.display="inline-block",Z.Utils.buttonSize(U,i,j),Z.Utils.buttonSize(V,i,j),W.left=v+C+"px",W.top=z+"px",X.left=v+D+"px",X.top=z+"px"))}}v=G;var Y=document.getElementById("buttonZoomOut");Z.Utils.buttonSize(Y,i,j);var $=Y.style;$.left=v+"px",$.top=y+"px",v+=k;var _=document.getElementById("trackSlider"),ba=document.getElementById("buttonSlider");if(_&&ba){var bb=_.style,bc=ba.style;bb&&bc&&(q?(bb.display="none",bc.display="none"):(bb.display="inline-block",bc.display="inline-block",Z.Utils.graphicSize(_,n,o),bb.left=v-2+"px",bb.top=A+"px",Z.Utils.buttonSize(ba,l,m),bc.left=parseFloat(bb.left)+"px",bc.top=B+"px",v+=p))}var bd=document.getElementById("buttonZoomIn");Z.Utils.buttonSize(bd,i,j);var be=bd.style;be.left=v+"px",be.top=y+"px",v+=k+1;var bf=document.getElementById("panDivider");Z.Utils.graphicSize(bf,g,h);var bg=bf.style;bg.left=v+"px",bg.top=x+"px",v+=E;var bh=document.getElementById("buttonPanLeft");Z.Utils.buttonSize(bh,i,j);var bi=bh.style;bi.left=v+"px",bi.top=y+"px",v+=k;var bj=document.getElementById("buttonPanUp");Z.Utils.buttonSize(bj,i,j);var bk=bj.style;bk.left=v+"px",bk.top=y+"px",v+=k;var bl=document.getElementById("buttonPanDown");Z.Utils.buttonSize(bl,i,j);var bm=bl.style;bm.left=v+"px",bm.top=y+"px",v+=k;var bn=document.getElementById("buttonPanRight");Z.Utils.buttonSize(bn,i,j);var bo=bn.style;bo.left=v+"px",bo.top=y+"px",v+=k;var bp=document.getElementById("buttonReset");Z.Utils.buttonSize(bp,i,j);var bq=bp.style;bq.left=v+"px",bq.top=y+"px",v+=k+1;var br=document.getElementById("fullPageDivider");if(br){Z.Utils.graphicSize(br,g,h);var bs=br.style;bs.left=v+"px",bs.top=x+"px",v+=E;var bt=document.getElementById("buttonFullPage");Z.Utils.buttonSize(bt,i,j);var bu=bt.style;bu.left=v+"px",bu.top=y+"px"}var bv=document.getElementById("progressTextBox");if(bv){var bw=bv.style;bw&&(r?bw.display="none":(bw.display="inline-block",bw.width=t+"px",bw.height=u+"px",bw.left=c-parseFloat(O.style.left)-parseFloat(bw.width)+"px",bw.top=(d-parseFloat(bw.height))/2+"px"))}}function y(a){Z.toolbarVisible<4&&!Z.mobileDevice?z(a):A(!a)}function z(a){f&&(a?f.display="inline-block":f.display="none")}function A(a){if(f){var b=document.getElementById("buttonContainer"),c=document.getElementById("background"),d=document.getElementById("buttonMinimize"),e=document.getElementById("buttonExpand"),g=document.getElementById("logoDivider"),h=0;s||(h=parseFloat(e.style.left)+parseFloat(e.style.width)+4);var i=Z.toolbarCurrentW;a?(b.style.display="none",s||(g&&(g.style.display="none"),d.style.display="none",e.style.display="inline-block"),f.width=h+"px",c.style.width=h+"px"):(b.style.display="inline-block",s||(g&&(g.style.display="inline-block"),d.style.display="inline-block",e.style.display="none"),f.width=i+"px",c.style.width=i+"px")}}function B(a){if(Z.sliderVisible){g||(g=document.getElementById("trackSlider")),h||(h=g.style),i||(i=document.getElementById("buttonSlider")),j||(j=i.style);if(h&&j){var b=Z.maxZ-Z.minZ,c=(a-Z.minZ)/b;trackL=parseFloat(h.left),trackR=parseFloat(h.left)+parseFloat(h.width)-parseFloat(j.width);var d=trackR-trackL,e=c*d+trackL;j.left=e+"px"}}}function C(b){g||(g=document.getElementById("trackSlider")),h||(h=g.style);if(g&&h){var c,d=Z.Utils.getElementPosition(g);Z.mobileDevice?c=Z.Utils.getMousePosition(b).x-d.x:c=b.clientX-d.x;var e=G(c,0,parseFloat(h.width));e<Z.minZ+.1&&(e=Z.minZ),e>Z.maxZ-.1&&(e=Z.maxZ),a.scaleTierToZoom(e),a.updateView()}}function D(a){m=!0,i||(i=document.getElementById("buttonSlider"));if(i){var b=Z.Utils.getMousePosition(a);i.mouseXPrior=b.x,i.mouseYPrior=b.y}}function E(b){g||(g=document.getElementById("trackSlider")),h||(h=g.style),i||(i=document.getElementById("buttonSlider")),j||(j=i.style);if(h&&i&&j){trackL=parseFloat(h.left),trackR=parseFloat(h.left)+parseFloat(h.width)-parseFloat(j.width);var c=parseFloat(j.left)+(o.x-i.mouseXPrior);c<trackL?c=trackL:c>trackR?c=trackR:i.mouseXPrior=o.x,j.left=c+"px";var d=G(c,trackL,trackR);a.scaleTierToZoom(d)}}function F(){m=!1,a.updateView()}function G(a,b,c){var d=c-b,e=(a-b)/d,f=Z.maxZ-Z.minZ,g=Z.minZ+f*e;return g}function H(a){var a=Z.Utils.event(a),b=Z.Utils.relatedTarget(Z.Utils.event(a));if(!m&&b){var c=b.parentNode;J(c)}}function I(a){Z.mobileDevice&&a.preventDefault();var a=Z.Utils.event(a),b=Z.Utils.target(a),c=Z.Utils.relatedTarget(a);if(b){var d=b.parentNode;d&&(targetParentID=d.id)}if(c){var e=c.parentNode;e&&(relatedTargetParentID=e.id)}if(!m||a.type=="mouseup"||a.type=="touchend"||a.type=="touchcancel")M(),b&&!Z.Utils.isRightMouseButton(a)&&(targetParentID&&targetParentID!="trackSlider"&&a.type!="mousemove"&&(N(a),O(a)),P(a))}function J(b){a&&a.zoomAndPanAllStop(),b.id&&b.id.indexOf("button")!=-1?(K(b),L(b)):b.id&&b.id.indexOf("background")!=-1&&M()}function K(a){Z.Utils.removeEventListener(a,"mousedown",I),Z.Utils.removeEventListener(a,"mouseup",I),Z.Utils.removeEventListener(a,"mouseout",I),Z.Utils.addEventListener(a,"mouseover",I)}function L(a){var b=document.getElementById(a._imgUpID),c=document.getElementById(a._imgOverID),d=document.getElementById(a._imgDownID);b&&(b.style.visibility="visible"),c&&(c.style.visibility="hidden"),d&&(d.style.visibility="hidden")}function M(){var a=Z.ToolbarDisplay.childNodes,b=null;for(var c=0,d=a.length;c<d;c++){b=a[c];if(b.id&&b.id.indexOf("button")!=-1)if(b.id!="buttonContainer")K(b),L(b);else{var e=b.childNodes,f=null;for(var g=0,h=e.length;g<h;g++)f=e[g],f.id&&f.id.indexOf("button")!=-1&&(K(f),L(f))}}}function N(a){var b=Z.Utils.target(a);if(b){var c=b.parentNode;c&&(Z.mobileDevice?(Z.Utils.removeEventListener(c,"touchstart",I),Z.Utils.removeEventListener(c,"touchend",I),Z.Utils.removeEventListener(c,"touchcancel",I)):(Z.Utils.removeEventListener(c,"mouseover",I),Z.Utils.removeEventListener(c,"mousedown",I),Z.Utils.removeEventListener(c,"mouseup",I),Z.Utils.removeEventListener(c,"mouseout",I)))}}function O(a){var b=Z.Utils.target(a);if(b){var c=Z.Utils.target(a).parentNode;if(c)if(!c._imgUpID)J(c);else{var d=document.getElementById(c._imgUpID),e=document.getElementById(c._imgOverID),f=document.getElementById(c._imgDownID);if(d&&e&&f){var g=d.style,h=e.style,i=f.style;g.visibility="hidden",h.visibility="hidden",i.visibility="hidden";switch(a.type){case"mouseover":h.visibility="visible";break;case"mousedown":i.visibility="visible";break;case"mousemove":i.visibility="visible";break;case"mouseup":h.visibility="visible";break;case"mouseout":g.visibility="visible";break;case"touchstart":i.visibility="visible";break;case"touchend":g.visibility="visible";break;case"touchcancel":g.visibility="visible"}}}}}function P(c){var d=Z.Utils.target(c).parentNode;if(d){var e=d.id;switch(c.type){case"mouseover":Z.Utils.addEventListener(d,"mousedown",I);break;case"mousedown":Z.Utils.addEventListener(d,"mouseup",I);if(a)switch(e){case"buttonMinimize":b.minimize(!0),Z.Navigator.setVisibility(!1);break;case"buttonExpand":b.minimize(!1),Z.Navigator.setVisibility(!0);break;case"buttonZoomOut":a.zoom("out");break;case"buttonSlider":D(c),Q(c),Z.Utils.addEventListener(document,"mousemove",Q),n||(n=window.setInterval(E,l)),Z.Utils.addEventListener(document,"mouseup",I);break;case"trackSlider":C(c);break;case"buttonZoomIn":a.zoom("in");break;case"buttonPanLeft":a.pan("left");break;case"buttonPanUp":a.pan("up");break;case"buttonPanDown":a.pan("down");break;case"buttonPanRight":a.pan("right");break;case"buttonReset":a.reset()}break;case"mouseup":Z.Utils.addEventListener(d,"mousedown",I),a&&(e=="buttonSlider"||m?(n&&(window.clearInterval(n),n=null),F(),Z.Utils.removeEventListener(document,"mousemove",Q),Z.Utils.removeEventListener(document,"mouseup",I),M()):e=="buttonZoomOut"||e=="buttonZoomIn"?a.zoom("stop"):e=="buttonPanLeft"||e=="buttonPanRight"?a.pan("horizontalStop"):e=="buttonPanUp"||e=="buttonPanDown"?a.pan("verticalStop"):e=="buttonFullPage"&&a.toggleFullPageView());break;case"mouseout":Z.Utils.addEventListener(d,"mouseover",I),a&&(e=="buttonZoomOut"||e=="buttonZoomIn"?a.zoom("stop"):e=="buttonPanLeft"||e=="buttonPanRight"?a.pan("horizontalStop"):(e=="buttonPanUp"||e=="buttonPanDown")&&a.pan("verticalStop"));break;case"touchstart":Z.Utils.addEventListener(d,"touchend",I),Z.Utils.addEventListener(d,"touchcancel",I);if(a)switch(e){case"buttonMinimize":b.minimize(!0),Z.Navigator.setVisibility(!1);break;case"buttonExpand":b.minimize(!1),Z.Navigator.setVisibility(!0);break;case"buttonZoomOut":a.zoom("out");break;case"buttonSlider":D(c),R(c),Z.Utils.addEventListener(document,"touchmove",R),n||(n=window.setInterval(E,l)),Z.Utils.addEventListener(d,"touchend",I),Z.Utils.addEventListener(d,"touchcancel",I);break;case"trackSlider":C(c);break;case"buttonZoomIn":a.zoom("in");break;case"buttonPanLeft":a.pan("left");break;case"buttonPanUp":a.pan("up");break;case"buttonPanDown":a.pan("down");break;case"buttonPanRight":a.pan("right");break;case"buttonReset":a.reset()}break;case"touchend":Z.Utils.addEventListener(d,"touchstart",I),a&&(e=="buttonZoomOut"||e=="buttonZoomIn"?(a.zoom("stop"),Z.debug&&e=="buttonZoomOut"&&c.altKey&&Z.Utils.showGlobals()):e=="buttonSlider"?(n&&(window.clearInterval(n),n=null),F(),Z.Utils.removeEventListener(document,"touchmove",R)):e=="buttonPanLeft"||e=="buttonPanRight"?a.pan("horizontalStop"):e=="buttonPanUp"||e=="buttonPanDown"?a.pan("verticalStop"):e=="buttonFullPage"&&a.toggleFullPageView());break;case"touchcancel":Z.Utils.addEventListener(d,"touchstart",I),a&&(e=="buttonZoomOut"||e=="buttonZoomIn"?(a.zoom("stop"),Z.debug&&e=="buttonZoomOut"&&c.altKey&&Z.Utils.showGlobals()):e=="buttonSlider"?(n&&(window.clearInterval(n),n=null),F(),Z.Utils.removeEventListener(document,"touchmove",R)):e=="buttonPanLeft"||e=="buttonPanRight"?a.pan("horizontalStop"):e=="buttonPanUp"||e=="buttonPanDown"?a.pan("verticalStop"):e=="buttonFullPage"&&a.toggleFullPageView())}}}function Q(a){o=new Z.Utils.Point(a.clientX,a.clientY)}function R(a){var b=Z.Utils.getFirstTouch(a);if(b){var c=b.target;o=new Z.Utils.Point(b.pageX,b.pageY)}}var b=this,c=!1,d=new Z.NetConnector;Z.skinPath=Z.Utils.removeTrailingSlashCharacters(Z.skinPath),d.loadXML(Z.skinPath+"/"+Z.Utils.getResource("DEFAULT_SKINXMLFILE"));var e,f,g,h,i,j,k=[],l=parseInt(Z.Utils.getResource("DEFAULT_SLIDERTESTDURATION"),10),m=!1,n=null,o=null,p=null,q,r,s;this.initializeToolbar=function(a,b){Z.ToolbarDisplay=Z.Utils.createContainerElement("div","ToolbarDisplay","inline-block","absolute","hidden","1px","1px","0px","1px","none","0px","transparent none","0px","0px","default"),f=Z.ToolbarDisplay.style;var c=new Z.Utils.Graphic("background",Z.skinPath,b[0],"1px","1px","0px","0px");Z.ToolbarDisplay.appendChild(c.elmt),toolbarSkinSizes=a;if(Z.logoVisible){var d;if(!Z.Utils.isStrVal(Z.logoCustomPath))d=new Z.Utils.Graphic("toolbarLogo",Z.skinPath,b[1],"1px","1px","1px","1px");else{var g=Z.Utils.cacheProofPath(Z.logoCustomPath);d=new Z.Utils.Graphic("toolbarLogo",g,null,"1px","1px","1px","1px")}Z.ToolbarDisplay.appendChild(d.elmt);if(Z.toolbarVisible==0||Z.toolbarVisible==1){var h=new Z.Utils.Graphic("logoDivider",Z.skinPath,b[2],"1px","1px","1px","1px");Z.ToolbarDisplay.appendChild(h.elmt)}}var i=Z.Utils.createContainerElement("div","buttonContainer","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","default");Z.ToolbarDisplay.appendChild(i),Z.mobileDevice?Z.Utils.addEventListener(i,"touchstart",Z.Utils.preventDefault):(Z.Utils.addEventListener(i,"mousedown",Z.Utils.preventDefault),Z.Utils.addEventListener(i,"mouseover",H));var j=new Z.Utils.Graphic("buttonBackground",Z.skinPath,b[0],"1px","1px","0px","0px");i.appendChild(j.elmt);if(Z.toolbarVisible!=0&&Z.toolbarVisible!=1||Z.mobileDevice){var k=new Z.Utils.Button("buttonMinimize",null,Z.skinPath,b[3],b[4],b[5],"1px","1px","1px","1px","mouseover",I,"TIP_MINIMIZE");Z.ToolbarDisplay.appendChild(k.elmt);var l=new Z.Utils.Button("buttonExpand",null,Z.skinPath,b[6],b[7],b[8],"1px","1px","1px","1px","mouseover",I,"TIP_EXPAND");Z.ToolbarDisplay.appendChild(l.elmt)}var m=new Z.Utils.Button("buttonZoomOut",null,Z.skinPath,b[9],b[10],b[11],"1px","1px","1px","1px","mouseover",I,"TIP_ZOOMOUT");i.appendChild(m.elmt);if(Z.sliderVisible){var n=new Z.Utils.Graphic("trackSlider",Z.skinPath,b[12],"1px","1px","0px","0px");i.appendChild(n.elmt),Z.Utils.addEventListener(n.elmt,"mousedown",I),Z.Utils.addEventListener(n.elmt,"touchstart",I);var o=new Z.Utils.Button("buttonSlider",null,Z.skinPath,b[14],b[15],b[16],"1px","1px","1px","1px","mouseover",I,"TIP_SLIDER");i.appendChild(o.elmt)}var p=new Z.Utils.Button("buttonZoomIn",null,Z.skinPath,b[17],b[18],b[19],"1px","1px","1px","1px","mouseover",I,"TIP_ZOOMIN");i.appendChild(p.elmt);var q=new Z.Utils.Graphic("panDivider",Z.skinPath,b[20],"1px","1px","1px","1px");i.appendChild(q.elmt);var r=new Z.Utils.Button("buttonPanLeft",null,Z.skinPath,b[21],b[22],b[23],"1px","1px","1px","1px","mouseover",I,"TIP_PANLEFT");i.appendChild(r.elmt);var s=new Z.Utils.Button("buttonPanUp",null,Z.skinPath,b[24],b[25],b[26],"1px","1px","1px","1px","mouseover",I,"TIP_PANUP");i.appendChild(s.elmt);var t=new Z.Utils.Button("buttonPanDown",null,Z.skinPath,b[27],b[28],b[29],"1px","1px","1px","1px","mouseover",I,"TIP_PANDOWN");i.appendChild(t.elmt);var u=new Z.Utils.Button("buttonPanRight",null,Z.skinPath,b[30],b[31],b[32],"1px","1px","1px","1px","mouseover",I,"TIP_PANRIGHT");i.appendChild(u.elmt);var x=new Z.Utils.Button("buttonReset",null,Z.skinPath,b[33],b[34],b[35],"1px","1px","1px","1px","mouseover",I,"TIP_RESET");i.appendChild(x.elmt);if(Z.fullPageVisible){var z=new Z.Utils.Graphic("fullPageDivider",Z.skinPath,b[36],"1px","1px","1px","1px");i.appendChild(z.elmt);var A=new Z.Utils.Button("buttonFullPage",null,Z.skinPath,b[37],b[38],b[39],"1px","1px","1px","1px","mouseover",I,"TIP_TOGGLEFULLPAGE");i.appendChild(A.elmt)}if(Z.progressVisible){var C=Z.Utils.createContainerElement("div","progressTextBox","inline-block","absolute","hidden","1px","1px","1px","1px","none","0px","transparent none","0px","0px"),D=toolbarSkinSizes[16]+"px";i.appendChild(C);var E=document.createTextNode(Z.Utils.getResource("DEFAULT_PROGRESSTEXT"));C.appendChild(Z.Utils.createCenteredElement(E)),Z.Utils.setTextStyle(E,"black","verdana",D,"none","normal","normal","normal","normal","1em","left","none"),Z.Utils.addEventListener(C,"contextmenu",Z.Utils.preventDefault),Z.Utils.disableTextInteraction(E)}Z.ViewerDisplay.appendChild(Z.ToolbarDisplay),Z.toolbarW=toolbarSkinSizes[0],Z.toolbarCurrentW=Z.toolbarW==-1?Z.viewerW:Z.toolbarW,Z.toolbarH=e=toolbarSkinSizes[1];var F=Z.toolbarPosition==1?Z.viewerH-e:0;w(Z.toolbarCurrentW,Z.toolbarH,0,F);if(Z.Viewport&&Z.Viewport.getInitialized()){var G=Z.Viewport.getTierScaleAsZoom();B(G)}y(Z.toolbarVisible==1||Z.toolbarVisible==2||Z.toolbarVisible==4),Z.Utils.addEventListener(Z.ToolbarDisplay,"mouseover",Z.Utils.stopPropagation),v(!0)},this.getInitialized=function(){return u()},this.setSizeAndPosition=function(a,b,c,d){w(a,b,c,d)},this.show=function(a){y(a)},this.setVisibility=function(a){z(a)},this.minimize=function(a){A(a)},this.showProgress=function(a,b){if(Z.progressVisible){p&&window.clearInterval(p);var c,d=document.getElementById("progressTextBox").firstChild.firstChild.firstChild.firstChild;d&&(a==0||b==0?(d.nodeValue="llllllllll",p=window.setInterval(t,parseInt(Z.Utils.getResource("DEFAULT_PROGRESSDURATION")),10)):(c=Math.round(100-b/a*100),d.nodeValue="l".multiply(Math.round(c/10))))}},this.syncSliderToViewport=function(a){B(a)}},Z.ZoomifyNavigator=function(a){function x(a){Z.NavigatorDisplay=Z.Utils.createContainerElement("div","NavigatorDisplay","inline-block","absolute","hidden",e+"px",f+"px",g+"px",h+"px","solid","1px","transparent none","0px","0px"),o=Z.NavigatorDisplay,p=o.style;var b=Z.Utils.getResource("DEFAULT_NAVIGATORBACKCOLOR"),c=Z.Utils.getResource("DEFAULT_NAVIGATORBACKCOLORNOALPHA"),d=Z.Utils.createContainerElement("div","navigatorBackground","inline-block","absolute","hidden",e+"px",f+"px","0px","0px","none","0px",b,"0px","0px");Z.Utils.setOpacity(d,l,c),Z.NavigatorDisplay.appendChild(d),q=d,r=q.style;var j=Z.Utils.createContainerElement("div","navigatorImageContainer","inline-block","absolute","hidden",e+"px",f+"px","0px","0px","none","0px","transparent none","0px","0px");j.appendChild(n),Z.NavigatorDisplay.appendChild(j),s=j,t=s.style,u=n;var k=Z.Utils.createContainerElement("div","navigatorRectangle","inline-block","absolute","hidden",e+1+"px",f+1+"px",g+"px",h+"px","solid","1px","transparent none","0px","0px");k.style.borderColor=Z.Utils.getResource("DEFAULT_NAVIGATORRECTANGLECOLOR"),Z.NavigatorDisplay.appendChild(k),v=k,w=v.style,Z.ViewerDisplay.appendChild(Z.NavigatorDisplay),C(e,f,g,h,i),H(Z.navigatorVisible==1||Z.navigatorVisible==2),F(),Z.mobileDevice?(Z.Utils.addEventListener(o,"touchstart",P),Z.Utils.addEventListener(o,"touchmove",Q),Z.Utils.addEventListener(o,"touchend",R),Z.Utils.addEventListener(o,"touchcancel",S)):(Z.Utils.addEventListener(u,"mousedown",Z.Utils.preventDefault),Z.Utils.addEventListener(o,"mousedown",Z.Utils.preventDefault),Z.Utils.addEventListener(o,"mouseover",Z.Utils.stopPropagation),Z.Utils.addEventListener(o,"mousedown",M)),Z.Utils.addEventListener(n,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(d,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(k,"contextmenu",Z.Utils.preventDefault),B(!0),G()}function y(a){C(e,f,g,h,i),H(Z.navigatorVisible==1||Z.navigatorVisible==2),F()}function z(){if(A()){d&&(window.clearInterval(d),d=null);if(!o||!p||!q||!r||!s||!t||!u||!v||!w)o=Z.NavigatorDisplay,p=o.style,q=Z.NavigatorDisplay.childNodes[0],r=q.style,s=Z.NavigatorDisplay.childNodes[1],t=s.style,u=Z.NavigatorDisplay.childNodes[1].firstChild,v=Z.NavigatorDisplay.childNodes[2],w=v.style}}function A(){return c}function B(a){c=a}function C(a,b,c,d,e){a||(a=Z.navigatorW),b||(b=Z.navigatorH),c||(c=0),d||(d=0),o||(o=Z.NavigatorDisplay),p||(p=o.style),u=o.childNodes[1].firstChild;if(o&&p&&u){if(e){var f=1,g=1;e==0?g=Z.viewerW/Z.viewerH:g=u.width/u.height,f>1?(b=a,b/=g):(a=b,a*=g)}p.width=a+"px",p.height=b+"px",p.left=c-1+"px",p.top=d-1+"px",D(a,b)}}function D(a,b){r||(r=Z.NavigatorDisplay.firstChild.style),t||(t=Z.NavigatorDisplay.childNodes[1].style),u||(u=Z.NavigatorDisplay.childNodes[1].firstChild),r&&t&&u&&(r.width=a+"px",r.height=b+"px",E(a,b,u.width,u.height),t.width=u.width+"px",t.height=u.height+"px",t.left=(a-parseFloat(t.width))/2+"px",t.top=(b-parseFloat(t.height))/2+"px",G())}function E(a,b,c,d){u||(u=Z.NavigatorDisplay.childNodes[1].firstChild);if(u){var e=c/d,f=a/c,g=b/d,h=0,i=0;f<=g?(c=a,d=a/e,i=(b-d*(a/c))/2):g<f&&(d=b,c=b*e,h=(a-c*(b/d))/2),u.width=c,u.height=d}}function F(){p||(p=Z.NavigatorDisplay.style),p&&(p.zIndex=p.zIndex+100)}function G(){if(Z.Viewport&&Z.Viewport.getInitialized()){I();var a=Z.Viewport.calculateCurrentCenterCoordinates();J(a)}}function H(a){p||(p=Z.NavigatorDisplay.style),p&&(a?p.display="inline-block":p.display="none")}function I(){if(u&&w){var a=u.width/Z.imageW,b=u.height/Z.imageH,c=Z.Viewport.getTierScaleAsZoom(),d=Z.viewerW*a/c,e=Z.viewerH*b/c;w.width=d+"px",w.height=e+"px"}}function J(a){if(u&&w&&t){var b=u.width/Z.imageW,c=u.height/Z.imageH,d=a.x*b,e=a.y*c,f=d-parseFloat(w.width)/2,g=e-parseFloat(w.height)/2;w.left=f+parseFloat(t.left)+"px",w.top=g+parseFloat(t.top)+"px"}}function K(){if(w&&t&&u){var a=parseFloat(w.left)-parseFloat(t.left),b=parseFloat(w.top)-parseFloat(t.top),c=a+(parseFloat(w.width)-1)/2,d=b+(parseFloat(w.height)-1)/2,e=Z.imageW/u.width,f=Z.imageH/u.height,g=c*e,h=d*f;Z.Viewport.syncToNavigator(g,h)}}function L(){Z.Utils.showMessage(Z.Utils.getResource("ERROR_NAVIGATORIMAGEPATHINVALID"))}function M(a){if(o&&v&&w){var a=Z.Utils.event(a);v.mouseXPrior=a.clientX,v.mouseYPrior=a.clientY,zaptvDragPtStart=new Z.Utils.Point(a.clientX,a.clientY),Z.Utils.addEventListener(o,"mousemove",N),Z.Utils.addEventListener(o,"mouseup",O),Z.Utils.addEventListener(document,"mouseup",O)}}function N(a){if(v&&w){var b=parseFloat(w.left),c=parseFloat(w.top);return w.left=b+(a.clientX-v.mouseXPrior)+"px",w.top=c+(a.clientY-v.mouseYPrior)+"px",v.mouseXPrior=a.clientX,v.mouseYPrior=a.clientY,K(),!1}}function O(a){if(o&&v&&w){document.mousemove=null,document.mouseup=null,Z.Utils.removeEventListener(o,"mousemove",N),Z.Utils.removeEventListener(o,"mouseup",O),Z.Utils.removeEventListener(document,"mouseup",O);var a=Z.Utils.event(a),b=new Z.Utils.Point(a.clientX,a.clientY),c=Math.sqrt(Math.pow(zaptvDragPtStart.x-b.x,2)+Math.pow(zaptvDragPtStart.y-b.y,2));if(c<4){var d=Z.Utils.getElementPosition(Z.NavigatorDisplay);w.left=a.clientX-d.x-parseFloat(w.width)/2+"px",w.top=a.clientY-d.y-parseFloat(w.height)/2+"px"}K(),Z.Viewport.updateView()}}function P(a){a.preventDefault();if(o&&v&&w){var b=Z.Utils.getFirstTouch(a);if(b){var c=b.target,d=new Z.Utils.Point(b.pageX,b.pageY);zaptvDragPtStart=new Z.Utils.Point(d.x,d.y),v.mouseXPrior=d.x,v.mouseYPrior=d.y,zaptvDragPtStart=new Z.Utils.Point(d.x,d.y)}}}function Q(a){a.preventDefault();if(!Z.mousePan)return;if(v&&w){var b=Z.Utils.getFirstTouch(a);if(b){var c=b.target,d=new Z.Utils.Point(b.pageX,b.pageY),e=parseFloat(w.left),f=parseFloat(w.top);return w.left=e+(d.x-v.mouseXPrior)+"px",w.top=f+(d.y-v.mouseYPrior)+"px",v.mouseXPrior=d.x,v.mouseYPrior=d.y,K(),!1}}return!1}function R(a){if(o&&v&&w){var b=Z.Utils.getFirstTouch(a);if(b){var c=b.target,d=new Z.Utils.Point(b.pageX,b.pageY),e=new Z.Utils.Point(d.x,d.y),f=Math.sqrt(Math.pow(zaptvDragPtStart.x-e.x,2)+Math.pow(zaptvDragPtStart.y-e.y,2)),g=Z.mobileDevice?6:3;if(f<g){var h=Z.Utils.getElementPosition(Z.NavigatorDisplay);w.left=d.x-h.x-parseFloat(w.width)/2+"px",w.top=d.y-h.y-parseFloat(w.height)/2+"px"}}K(),Z.Viewport.updateView()}}function S(a){if(o&&v&&w){var b=Z.Utils.getFirstTouch(a);if(b){var c=b.target,d=new Z.Utils.Point(b.pageX,b.pageY),e=new Z.Utils.Point(d.x,d.y),f=Math.sqrt(Math.pow(zaptvDragPtStart.x-e.x,2)+Math.pow(zaptvDragPtStart.y-e.y,2)),g=Z.mobileDevice?6:3;if(f<g){var h=Z.Utils.getElementPosition(Z.NavigatorDisplay);w.left=d.x-h.x-parseFloat(w.width)/2+"px",w.top=d.y-h.y-parseFloat(w.height)/2+"px"}}K(),Z.Viewport.updateView()}}var b=this,c=!1,d,e=Z.navigatorW,f=Z.navigatorH,g=Z.navigatorL-1,h=Z.navigatorT-1,i=Z.navigatorFit,j,k=null,l=parseFloat(Z.Utils.getResource("DEFAULT_NAVIGATORBACKALPHA")),m=Z.Utils.cacheProofPath(Z.imagePath+"/TileGroup0/"+"0-0-0.jpg"),n=new Image;n.onload=x,n.onerror=L,n.src=m;var o,p,q,r,s,t,u,v,w;this.setImagePath=function(a){m=Z.Utils.cacheProofPath(Z.imagePath+"/TileGroup0/"+"0-0-0.jpg"),s.removeChild(n),n=null,n=new Image,s.appendChild(n),n.onload=y,n.onerror=L,n.src=m},this.getInitialized=function(){return A()},this.setSizeAndPosition=function(a,b,c,d,e){e||(e=i),C(a,b,c,d,e)},this.setVisibility=function(a){H(a)},this.syncToViewport=function(){G()},this.syncNavigatorRectangleDimensions=function(){I()},this.syncNavigatorRectanglePosition=function(a){J(a)},this.validateNavigatorGlobals=function(){A()?z():d=window.setInterval(z,300)}},Z.NetConnector=function(a){function c(a,b){var c=null,d=typeof b=="function";if(d)var e=b,b=function(){window.setTimeout(Z.Utils.createCallback(null,e,c),1)};if(window.ActiveXObject){var f=["Msxml2.XMLHTTP","Msxml3.XMLHTTP","Microsoft.XMLHTTP"];for(var g=0;g<f.length;g++)try{c=new ActiveXObject(f[g]);break}catch(h){continue}}else window.XMLHttpRequest&&(c=new XMLHttpRequest);c||Z.Utils.showMessage(Z.Utils.getResource("ERROR_XMLHTTPREQUESTUNSUPPORTED")),d&&(c.onreadystatechange=function(){c.readyState==4&&(c.onreadystatechange=new Function,b())});try{c.open("GET",a,d),c.send(null)}catch(h){a.indexOf("ImageProperties.xml")!=-1?Z.Utils.showMessage(Z.Utils.getResource("ERROR_MAKINGNETWORKREQUEST-IMAGEXML")):a.indexOf("skinFiles.xml")!=-1?Z.Utils.showMessage(Z.Utils.getResource("ERROR_MAKINGNETWORKREQUEST-TOOLBARXML")):Z.Utils.showMessage(Z.Utils.getResource("ERROR_MAKINGNETWORKREQUEST")),c.onreadystatechange=null,c=null}return d?null:c}function d(a){if(a){if(!a)Z.Utils.showMessage(Z.Utils.getResource("ERROR_NETWORKSECURITY"));else if(a.status!==200&&a.status!==0){var b=a.status,c=b==404?"Not Found":a.statusText;Z.Utils.showMessage(Z.Utils.getResource("ERROR_NETWORKSTATUS")+b+" - "+c)}var d=null;a.responseXML&&a.responseXML.documentElement?(d=a.responseXML,e(d)):a.responseText&&(d=Z.Utils.convertXMLTextToXMLDoc(a.responseText),e(d))}else Z.Utils.showMessage(Z.Utils.getResource("ERROR_IMAGEPATHINVALID"))}function e(a){if(a&&a.documentElement){var b=a.documentElement.tagName;b=="COPYRIGHT"?f("copyright",a):b=="IMAGE_PROPERTIES"?f("image",a):b=="SKINDATA"?f("skin",a):Z.Utils.showMessage(Z.Utils.getResource("ERROR_XMLINVALID"))}else Z.Utils.showMessage(Z.Utils.getResource("ERROR_XMLINVALID"))}function f(a,b){if(a=="copyright"){var c=b.documentElement.getAttribute("STATEMENTTEXT"),d=b.documentElement.getAttribute("DECLINEDTEXT");Z.Utils.isStrVal(c)?Z.Utils.showCopyright(!0,c,d):Z.Utils.showMessage(Z.Utils.getResource("ERROR_IMAGEXMLINVALID"))}else if(a=="image"){var e=parseInt(b.documentElement.getAttribute("WIDTH"),10),f=parseInt(b.documentElement.getAttribute("HEIGHT"),10),g=parseInt(b.documentElement.getAttribute("TILESIZE"),10);!isNaN(e)&&e>0&&!isNaN(f)&&f>0&&!isNaN(g)&&g>0?Z.Viewport&&(Z.Viewport.getInitialized()?Z.Viewport.reinitializeViewport(e,f,g):Z.Viewport.initializeViewport(e,f,g)):Z.Utils.showMessage(Z.Utils.getResource("ERROR_IMAGEXMLINVALID"))}else if(a=="skin"){Z.skinMode=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("SKINMODE").nodeValue;var h,i;Z.skinMode==1||Z.skinMode==0&&!Z.mobileDevice?(h=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("FOLDERSTANDARD").nodeValue,i="SIZESSTANDARD"):(h=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("FOLDERLARGE").nodeValue,i="SIZESLARGE");var j=[];j.push(parseFloat(b.getElementsByTagName(i)[0].attributes.getNamedItem("TOOLBARW").nodeValue)),j.push(parseFloat(b.getElementsByTagName(i)[0].attributes.getNamedItem("TOOLBARH").nodeValue)),j.push(parseFloat(b.getElementsByTagName(i)[0].attributes.getNamedItem("LOGOW").nodeValue)),j.push(parseFloat(b.getElementsByTagName(i)[0].attributes.getNamedItem("LOGOH").nodeValue)),j.push(parseFloat(b.getElementsByTagName(i)[0].attributes.getNamedItem("DIVIDERW").nodeValue)),j.push(parseFloat(b.getElementsByTagName(i)[0].attributes.getNamedItem("DIVIDERH").nodeValue)),j.push(parseFloat(b.getElementsByTagName(i)[0].attributes.getNamedItem("BUTTONW").nodeValue)),j.push(parseFloat(b.getElementsByTagName(i)[0].attributes.getNamedItem("BUTTONH").nodeValue)),j.push(parseFloat(b.getElementsByTagName(i)[0].attributes.getNamedItem("BUTTONSPAN").nodeValue)),j.push(parseFloat(b.getElementsByTagName(i)[0].attributes.getNamedItem("SLIDERBUTTONW").nodeValue)),j.push(parseFloat(b.getElementsByTagName(i)[0].attributes.getNamedItem("SLIDERBUTTONH").nodeValue)),j.push(parseFloat(b.getElementsByTagName(i)[0].attributes.getNamedItem("SLIDERTRACKW").nodeValue)),j.push(parseFloat(b.getElementsByTagName(i)[0].attributes.getNamedItem("SLIDERTRACKH").nodeValue)),j.push(parseFloat(b.getElementsByTagName(i)[0].attributes.getNamedItem("SLIDERSPAN").nodeValue)),j.push(parseFloat(b.getElementsByTagName(i)[0].attributes.getNamedItem("PROGRESSW").nodeValue)),j.push(parseFloat(b.getElementsByTagName(i)[0].attributes.getNamedItem("PROGRESSH").nodeValue)),j.push(parseFloat(b.getElementsByTagName(i)[0].attributes.getNamedItem("PROGRESSFONTSIZE").nodeValue));var k=[],l=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN0").nodeValue,m=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN39").nodeValue;if(Z.Utils.isStrVal(l)&&Z.Utils.isStrVal(m)){var n=!1;for(var o=0;o<40;o++){var p=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN"+o).nodeValue;Z.Utils.isStrVal(p)?k[o]=h+"/"+p:(k[o]="null",n=!0)}n&&Z.Utils.showMessage(Z.Utils.getResource("ERROR_SKINSXMLMISSINGNAMES")),Z.Toolbar&&Z.Toolbar.initializeToolbar(j,k)}else Z.Utils.showMessage(Z.Utils.getResource("ERROR_SKINXMLINVALID"))}}function g(a,c,d){b--;if(typeof a=="function")try{a(d)}catch(e){Z.Utils.showMessage(e.name+Z.Utils.getResource("ERROR_EXECUTINGCALLBACK")+c+" "+e.message)}}function h(a,b){function e(e){c.onload=null,c.onabort=null,c.onerror=null,d&&window.clearTimeout(d),window.setTimeout(function(){b(a,e?c:null)},1)}var c=null,d=null;this.start=function(){c=new Image;var b=function(){e(!0)},f=function(){e(!1)},g=function(){e(!1)};c.onload=b,c.onabort=f,c.onerror=f,d=window.setTimeout(g,parseFloat(Z.Utils.getResource("DEFAULT_TILEIMAGELOADTIMEOUT"))),c.src=a}}var b=0;this.loadXML=function(a){c(a,d)},this.loadTileImage=function(a,c){if(b>=parseInt(Z.Utils.getResource("DEFAULT_IMAGESLOADINGMAX"),10))return!1;var d=Z.Utils.createCallback(null,g,c),e=new h(a,d);return b++,e.start(),!0}},Z.Utils={declareGlobals:function(){Z.pageContainerID=null,Z.imagePath=null,Z.skinPath=null,Z.skinMode=null,Z.parameters=null,Z.browsers=null,Z.browser=null,Z.browserVersion=null,Z.canvasSupported=null,Z.cssTransformsSupported=null,Z.cssTransformProperty=null,Z.cssTransformNoUnits=null,Z.alphaSupported=null,Z.renderQuality=null,Z.mobileDevice=null,Z.initialX=null,Z.initialY=null,Z.initialZ=null,Z.minZ=null,Z.maxZ=null,Z.zoomSpeed=null,Z.panSpeed=null,Z.fadeInSpeed=null,Z.toolbarVisible=null,Z.toolbarW=null,Z.toolbarH=null,Z.toolbarPosition=null,Z.navigatorVisible=null,Z.navigatorW=null,Z.navigatorH=null,Z.navigatorL=null,Z.navigatorT=null,Z.navigatorFit=null,Z.clickZoom=null,Z.clickPan=null,Z.mousePan=null,Z.keys=null,Z.constrainPan=null,Z.tooltipsVisible=null,Z.copyrightPath=null,Z.watermarkPath=null,Z.sliderVisible=null,Z.fullPageVisible=null,Z.progressVisible=null,Z.logoVisible=null,Z.logoCustomPath=null,Z.canvas=null,Z.debug=null,Z.Viewer=null,Z.ViewerDisplay=null,Z.Viewport=null,Z.Toolbar=null,Z.ToolbarDisplay=null,Z.TooltipDisplay=null,Z.Navigator=null,Z.NavigatorDisplay=null,Z.CopyrightDisplay=null,Z.imageW=null,Z.imageH=null,Z.imageX=0,Z.imageY=0,Z.imageZ=0,Z.fitZ=null,Z.zooming="stop",Z.panningX="stop",Z.panningY="stop",Z.fullPage=!1,Z.useCanvas=!0,Z.TraceDisplay=null,Z.traces=null},enforceCopyright:function(){var a=this.readCookie("imageCopyright");a?Z.Viewer.configureViewer():this.loadCopyrightText()},loadCopyrightText:function(){var a=new Z.NetConnector;a.loadXML(Z.copyrightPath)},showCopyright:function(a,b,c){var d=this.getResource("DEFAULT_COPYRIGHTSCREENCOLOR"),e=this.getResource("DEFAULT_COPYRIGHTBUTTONCOLOR");if(a){Z.CopyrightDisplay=this.createContainerElement("div","CopyrightDisplay","inline-block","absolute","hidden",Z.viewerW-2+"px",Z.viewerH-2+"px","0px","0px","solid","1px",d,"0px","0px"),Z.ViewerDisplay.appendChild(Z.CopyrightDisplay);var f=440,g=200,h=parseFloat(Z.CopyrightDisplay.style.width)/2-f/2,i=parseFloat(Z.CopyrightDisplay.style.height)/2-g/2,j=this.createContainerElement("div","textBox","inline-block","absolute","hidden",f+"px",g+"px",h+"px",i+"px","none","0px","transparent none","0px","0px");j.id="textBox",Z.CopyrightDisplay.appendChild(j);var k=document.createTextNode(b);j.appendChild(this.createCenteredElement(k)),this.setTextStyle(k,"black","verdana","16px","none","normal","normal","normal","normal","1em","justify","none");var l=document.createTextNode(c);j.appendChild(l);var m=80,n=20,o=30,p=20,q=h+f/2-(m*2+o)/2,r=i+g+p,s=this.getResource("DEFAULT_COPYRIGHTAGREEBUTTONTEXT"),t=new Z.Utils.Button("buttonAgree",s,null,null,null,null,m+"px",n+"px",q+"px",r+"px","mousedown",this.copyrightAgreeButtonHandler,"TIP_COPYRIGHTAGREE","solid","1px",e,"0px","0px");Z.CopyrightDisplay.appendChild(t.elmt),q+=m+o,s=this.getResource("DEFAULT_COPYRIGHTEXITBUTTONTEXT");var u=new Z.Utils.Button("buttonExit",s,null,null,null,null,m+"px",n+"px",q+"px",r+"px","mousedown",this.copyrightExitButtonHandler,"TIP_COPYRIGHTEXIT","solid","1px",e,"0px","0px");Z.CopyrightDisplay.appendChild(u.elmt)}else{var j=document.getElementById("textBox"),v=j.childNodes[1].textContent;j.firstChild.firstChild.firstChild.firstChild.textContent=v;var t=document.getElementById("buttonAgree");this.removeEventListener(t,"mousedown",this.copyrightAgreeButtonHandler),Z.CopyrightDisplay.removeChild(t);var u=document.getElementById("buttonExit");this.removeEventListener(u,"mousedown",this.copyrightExitButtonHandler),Z.CopyrightDisplay.removeChild(u)}},Button:function(a,b,c,d,
e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=Z.Utils.createContainerElement("span",a,"inline-block","absolute","hidden",g,h,i,j,n,o,p,q,r,s);if(!Z.Utils.isStrVal(b)){c=Z.Utils.removeTrailingSlashCharacters(c);var u=Z.Utils.createGraphicElement(c+"/"+d),v=Z.Utils.createGraphicElement(c+"/"+e),w=Z.Utils.createGraphicElement(c+"/"+f);u.id=t.id+"-imgUp",v.id=t.id+"-imgOver",w.id=t.id+"-imgDown",t._imgUpID=u.id,t._imgOverID=v.id,t._imgDownID=w.id;var x=u.style,y=v.style,z=w.style;x.position=y.position=z.position="absolute",x.width=y.width=y.width=g,x.height=y.height=y.height=h,x.top=y.top=z.top="0px",x.left=y.left=z.left="0px",Z.browser==Z.browsers.FIREFOX&&Z.browserVersion<3&&(x.top=y.top=z.top=""),y.visibility="hidden",z.visibility="hidden",t.appendChild(u),t.appendChild(v),t.appendChild(w),Z.Utils.addEventListener(u,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(v,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(w,"contextmenu",Z.Utils.preventDefault)}else{var A=document.createTextNode(b);t.appendChild(Z.Utils.createCenteredElement(A)),Z.Utils.setTextStyle(A,"black","verdana","13px","none","normal","normal","normal","normal","1em","center","none"),Z.Utils.disableTextInteraction(A),Z.Utils.addEventListener(t,"contextmenu",Z.Utils.preventDefault)}Z.tooltipsVisible&&Z.Utils.isStrVal(m)&&(t.title=Z.Utils.getResource(m)),Z.mobileDevice?Z.Utils.addEventListener(t,"touchstart",l):(Z.Utils.addEventListener(t,"mousedown",Z.Utils.preventDefault),Z.Utils.addEventListener(t,"mouseover",Z.Utils.stopPropagation),Z.Utils.addEventListener(t,"mouseout",Z.Utils.stopPropagation),Z.Utils.addEventListener(t,k,l)),this.elmt=t},buttonSize:function(a,b,c){var d=a.style;d.width=b+"px",d.height=c+"px";var e=document.getElementById(a._imgUpID),f=document.getElementById(a._imgOverID),g=document.getElementById(a._imgDownID);if(e&&f&&g){var h=e.style,i=f.style,j=g.style;h.width=b+"px",h.height=c+"px",i.width=b+"px",i.height=c+"px",j.width=b+"px",j.height=c+"px"}},Graphic:function(a,b,c,d,e,f,g){b=Z.Utils.removeTrailingSlashCharacters(b);var h=c?b+"/"+c:b,i=Z.Utils.createGraphicElement(h),j=i.style;j.width=d,j.height=e;var c=Z.Utils.createContainerElement("span",a,"inline-block","absolute","hidden",d,e,f,g,"none","0px","transparent none","0px","0px");c.appendChild(i),this.elmt=c,Z.mobileDevice?Z.Utils.addEventListener(i,"touchstart",Z.Utils.preventDefault):Z.Utils.addEventListener(i,"mousedown",Z.Utils.preventDefault),Z.Utils.addEventListener(i,"contextmenu",Z.Utils.preventDefault)},graphicSize:function(a,b,c){var d=a.style;d.width=b+"px",d.height=c+"px";var e=a.firstChild,f=e.style;f.width=b+"px",f.height=c+"px"},copyrightAgreeButtonHandler:function(a){Z.ViewerDisplay.removeChild(Z.CopyrightDisplay),document.cookie="imageCopyright=confirmed",Z.Viewer.configureViewer()},copyrightExitButtonHandler:function(a){Z.Utils.showCopyright(!1);return},addCrossBrowserPrototypes:function(){String.prototype.multiply||(String.prototype.multiply=function(){var a=Array.prototype.join,b={};return function(c){return b.length=c+1,a.call(b,this)}}()),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){b?b<0&&(b=Math.max(0,this.length+b)):b=0;for(var c=b,d=this.length;c<d;c++)if(this[c]===a)return c;return-1}),Array.prototype.push||(Array.prototype.push=function(a){this[this.length]=a}),Array.prototype.splice||(Array.prototype.subarr=function(a,b){if(a>=this.length||b&&b<=0)return[];a<0&&(Math.abs(a)>this.length?a=0:a=this.length+a);if(!b||b+a>this.length)b=this.length-a;var c=[];for(var d=a;d<a+b;d++)c.push(this[d]);return c},Array.prototype.subarray=function(a,b){a<0&&(a=0);if(!b||b>this.length)b=this.length;if(a==b)return[];var c=[];for(var d=a;d<b;d++)c.push(this[d]);return c},Array.prototype.splice=function(a,b){b<0&&(b=0);var c=[];if(arguments.length>2)for(var d=2,e=arguments.length;d<e;d++)c.push(arguments[d]);var f=this.subarray(0,a),g=this.subarr(a,b),h=this.subarray(a+b),i=f.concat(c,h);this.length=0;for(var d=0,e=i.length;d<e;d++)this.push(i[d]);return g})},addCrossBrowserMethods:function(){document.addEventListener?(this.disableTextInteraction=function(a){a&&(tnS=a.parentNode.style,tnS&&(a.parentNode.unselectable="on",tnS.userSelect="none",tnS.MozUserSelect="none",tnS.webkitUserSelect="none",tnS.webkitTouchCallout="none",tnS.webkitTapHighlightColor="transparent"))},this.renderQuality=function(a,b){if(b){var c=b=="high"?"optimizeQuality":"optimizeSpeed";a.style.setProperty("image-rendering",c,null)}},this.setOpacity=function(a,b,c){Z.alphaSupported?a.style.opacity=b:c&&(a.style.backgroundColor=c)}):document.attachEvent&&(this.disableTextInteraction=function(a){a&&(a.parentNode.unselectable="on",a.parentNode.onselectstart=function(){return!1})},this.renderQuality=function(a,b){if(b){var c=b=="high"?"bicubic":"nearest-neighbor";a.style.msInterpolationMode=c}},this.setOpacity=function(a,b,c){Z.alphaSupported?(a.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity=' + value + ')",a.style.filter="alpha(opacity="+b+")"):c&&(a.style.backgroundColor=c)})},addCrossBrowserEvents:function(){document.addEventListener?(this.addEventListener=function(a,b,c){b=="mousewheel"&&elmt.addEventListener("DOMMouseScroll",c,!1),a.addEventListener(b,c,!1)},this.removeEventListener=function(a,b,c){b=="mousewheel"&&elmt.addEventListener("DOMMouseScroll",c,!1),a&&a.removeEventListener(b,c,!1)},this.event=function(a){return a},this.target=function(a){return a.target},this.relatedTarget=function(a){return a.relatedTarget},this.isRightMouseButton=function(a){var b=!1;if(a.which==2||a.which==3)b=!0;return b},this.preventDefault=function(a){a.preventDefault()},this.stopPropagation=function(a){a.stopPropagation()}):document.attachEvent&&(this.addEventListener=function(a,b,c){if(this._findListener(a,b,c)!=-1)return;var d=function(){var b=window.event;Function.prototype.call?c.call(a,b):(a._currentListener=c,a._currentListener(b),a._currentListener=null)};a.attachEvent("on"+b,d);var e={target:a,eventName:b,handler:c,handler2:d},f=a.document||a,g=f.parentWindow,h="l"+this._listenerCounter++;g._allListeners||(g._allListeners={}),g._allListeners[h]=e,a._listeners||(a._listeners=[]),a._listeners[a._listeners.length]=h,g._unloadListenerAdded||(g._unloadListenerAdded=!0,g.attachEvent("onunload",this._removeAllListeners))},this.removeEventListener=function(a,b,c){if(a){var d=this._findListener(a,b,c);if(d==-1)return;var e=a.document||a,f=e.parentWindow,g=a._listeners[d],h=f._allListeners[g];a.detachEvent("on"+b,h.handler2),a._listeners.splice(d,1),delete f._allListeners[g]}},this.event=function(a){return window.event},this.target=function(a){return a.srcElement},this.relatedTarget=function(a){var b=null;return a.type=="mouseover"?b=a.fromElement:a.type=="mouseout"&&(b=a.toElement),b},this.isRightMouseButton=function(a){var b=!1;return a.button==2&&(b=!0),b},this.preventDefault=function(a){a&&(a.returnValue=!1)},this.stopPropagation=function(a){a.cancelBubble=!0},this._findListener=function(a,b,c){var d=a._listeners;if(!d)return-1;var e=a.document||a,f=e.parentWindow;for(var g=d.length-1;g>=0;g--){var h=d[g],i=f._allListeners[h];if(i.eventName==b&&i.handler==c)return g}return-1},this._removeAllListeners=function(){var a=this;for(id in a._allListeners){var b=a._allListeners[id];b.target.detachEvent("on"+b.eventName,b.handler2),delete a._allListeners[id]}},this._listenerCounter=0)},detectBrowserInfo:function(){Z.browsers={UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5};var a=Z.browsers.UNKNOWN,b=0,c=navigator.appName,d=navigator.appVersion,e=!1,f=!1,g=navigator.userAgent.toLowerCase();if(c!="Microsoft Internet Explorer"||!window.attachEvent||!window.ActiveXObject)if(c!="Netscape"||!window.addEventListener)c=="Opera"&&!!window.opera&&!!window.attachEvent&&(a=Z.browsers.OPERA,b=parseFloat(d));else{var i=g.indexOf("firefox"),j=g.indexOf("safari"),k=g.indexOf("chrome");if(i>=0)a=Z.browsers.FIREFOX,b=parseFloat(g.substring(i+8));else if(j>=0){var l=g.substring(0,j).lastIndexOf("/");a=k>=0?Z.browsers.CHROME:Z.browsers.SAFARI,b=parseFloat(g.substring(l+1,j))}var m=new Image;m.style.getPropertyValue&&(f=m.style.getPropertyValue("image-rendering"))}else{var h=g.indexOf("msie");a=Z.browsers.IE,b=parseFloat(g.substring(h+5,g.indexOf(";",h))),e=typeof document.documentMode!="undefined"}var n=document.documentElement||{},o=n.style||{},p=!1,q=["transform","WebkitTransform","MozTransform"],r,s;while(r=q.shift())if(typeof o[r]!="undefined"){p=!0,s=/webkit/i.test(r);break}var t=document.createElement("canvas").getContext&&document.createElement("canvas").getContext("2d"),u=!(a==Z.browsers.SAFARI&&b<4||a==Z.browsers.CHROME&&b<2),v=t&&u,w=!(a==Z.browsers.IE||a==Z.browsers.CHROME&&b<2),x=e||f?"high":null,y=g.indexOf("android")>-1||g.indexOf("iphone")>-1||g.indexOf("ipad")>-1||g.indexOf("ipod")>-1;Z.browser=a,Z.browserVersion=b,Z.canvasSupported=v,Z.useCanvas=Z.canvasSupported,Z.cssTransformsSupported=p,Z.cssTransformProperty=r,Z.cssTransformNoUnits=s,Z.alphaSupported=w,Z.renderQuality=x,Z.mobileDevice=y},isStrVal:function(a){return a!=null&&a!=""},getElementPosition:function(a){var b=0,c=0,d=this.getElementStyle(a).position=="fixed",e=this.getOffsetParent(a,d);while(e){b+=a.offsetLeft,c+=a.offsetTop;if(d){var f=this.getPageScroll();b+=f.x,c+=f.y}a=e,d=this.getElementStyle(a).position=="fixed",e=this.getOffsetParent(a,d)}return new this.Point(b,c)},getOffsetParent:function(a,b){return b&&a!=document.body?document.body:a.offsetParent},getElementSize:function(a){return new this.Point(a.clientWidth,a.clientHeight)},getElementStyle:function(a){if(a.currentStyle)return a.currentStyle;if(window.getComputedStyle)return window.getComputedStyle(a,"");this.showMessage(this.getResource("ERROR_UNKNOWNELEMENTSTYLE"))},getEventTargetCoords:function(a){return getElementPosition(Z.Utils.target(a))},getFirstTouch:function(a){var b=null,c=a.touches,d=a.changedTouches;return c!==undefined?b=c[0]:d!==undefined&&(b=d[0]),b},getMousePosition:function(a){var b=0,c=0;return a.type=="DOMMouseScroll"&&browser==Browser.FIREFOX&&browserVersion<3?(b=a.screenX,c=a.screenY):typeof a.pageX=="number"?(b=a.pageX,c=a.pageY):typeof a.clientX=="number"?(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,c=a.clientY+document.body.scrollTop+document.documentElement.scrollTop):this.showMessage(this.getResource("ERROR_UNKNOWNMOUSEPOSITION")),new this.Point(b,c)},getMouseScroll:function(a){var b=0;return typeof a.wheelDelta=="number"?b=a.wheelDelta:typeof a.detail=="number"?b=a.detail*-1:this.showMessage(this.getResource("ERROR_UNKNOWNMOUSESCROLL")),b?b/Math.abs(b):0},getPageScroll:function(){var a=0,b=0,c=document.documentElement||{},d=document.body||{};if(typeof window.pageXOffset=="number")a=window.pageXOffset,b=window.pageYOffset;else if(d.scrollLeft||d.scrollTop)a=d.scrollLeft,b=d.scrollTop;else if(c.scrollLeft||c.scrollTop)a=c.scrollLeft,b=c.scrollTop;return new this.Point(a,b)},getWindowSize:function(){var a=0,b=0,c=document.documentElement||{},d=document.body||{};return typeof window.innerWidth=="number"?(a=window.innerWidth,b=window.innerHeight):c.clientWidth||c.clientHeight?(a=c.clientWidth,b=c.clientHeight):d.clientWidth||d.clientHeight?(a=d.clientWidth,b=d.clientHeight):this.showMessage(this.getResource("ERROR_UNKNOWNWINDOWSIZE")),new this.Point(a,b)},nodeIsInViewer:function(a){var b=!1,c=a;while(b==0)if(c)c.id?c.id=="ViewerDisplay"?b=!0:c=c.parentNode:c=c.parentNode;else break;return b},readCookie:function(a){var b=a+"=",c=document.cookie.split(";");for(var d=0;d<c.length;d++){var e=c[d];while(e.charAt(0)==" ")e=e.substring(1,e.length);if(e.indexOf(b)==0)return e.substring(b.length,e.length)}return null},removeTrailingSlashCharacters:function(a){var b=a.slice(-1,a.length)=="/"?a.slice(0,a.length-1):a;return b},cacheProofPath:function(a){if(Z.browser==Z.browsers.IE){var b=(new Date).getTime().toString(),c=Math.random().toString(),d=c+b;a+="?suffixToBlockPathCaching="+d}return a},easing:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b},parseParameters:function(a){var b;return a&&(b=a.split("&")),b},setParameters:function(a){var b=this.getResource("DEFAULT_PARAMETERSENABLETEST"),c=this.getResource("DEFAULT_PARAMETERSDISABLEVALUE"),d=this.getResource("DEFAULT_PARAMETERSDISABLEDALERT");Z.skinPath=this.getResource("DEFAULT_SKINXMLPATH"),Z.skinMode=this.getResource("DEFAULT_SKINMODE"),isNaN(parseFloat(this.getResource("DEFAULT_INITIALX")))||(Z.initialX=parseFloat(this.getResource("DEFAULT_INITIALX"))),isNaN(parseFloat(this.getResource("DEFAULT_INITIALY")))||(Z.initialY=parseFloat(this.getResource("DEFAULT_INITIALY"))),isNaN(parseFloat(this.getResource("DEFAULT_INITIALZOOM")))||(Z.initialZ=parseFloat(this.getResource("DEFAULT_INITIALZOOM"))),isNaN(parseFloat(this.getResource("DEFAULT_MINZOOM")))||(Z.minZ=parseFloat(this.getResource("DEFAULT_MINZOOM"))),isNaN(parseFloat(this.getResource("DEFAULT_MAXZOOM")))||(Z.maxZ=parseFloat(this.getResource("DEFAULT_MAXZOOM"))),isNaN(parseFloat(this.getResource("DEFAULT_ZOOMSPEED")))||(Z.zoomSpeed=parseFloat(this.getResource("DEFAULT_ZOOMSPEED"))),isNaN(parseFloat(this.getResource("DEFAULT_PANSPEED")))||(Z.panSpeed=parseFloat(this.getResource("DEFAULT_PANSPEED"))),isNaN(parseFloat(this.getResource("DEFAULT_FADEINSPEED")))||(Z.fadeInSpeed=parseFloat(this.getResource("DEFAULT_FADEINSPEED"))),Z.toolbarVisible=parseInt(this.getResource("DEFAULT_TOOLBARVISIBLE"),10),Z.toolbarPosition=parseFloat(this.getResource("DEFAULT_TOOLBARPOSITION")),Z.tooltipsVisible=this.getResource("DEFAULT_TOOLTIPSVISIBLE")!="0",Z.navigatorVisible=parseInt(this.getResource("DEFAULT_NAVIGATORVISIBLE"),10),Z.navigatorW=parseInt(this.getResource("DEFAULT_NAVIGATORWIDTH"),10),Z.navigatorH=parseInt(this.getResource("DEFAULT_NAVIGATORHEIGHT"),10),Z.navigatorL=parseInt(this.getResource("DEFAULT_NAVIGATORLEFT"),10),Z.navigatorT=parseInt(this.getResource("DEFAULT_NAVIGATORTOP"),10),Z.navigatorFit=this.getResource("DEFAULT_NAVIGATORFIT"),Z.clickZoom=this.getResource("DEFAULT_CLICKZOOM")!="0",Z.clickPan=this.getResource("DEFAULT_CLICKPAN")!="0",Z.mousePan=this.getResource("DEFAULT_MOUSEPAN")!="0",Z.keys=this.getResource("DEFAULT_KEYS")!="0",Z.constrainPan=this.getResource("DEFAULT_CONSTRAINPAN")!="0",Z.sliderVisible=this.getResource("DEFAULT_SLIDERVISIBLE")!="0",Z.fullPageVisible=this.getResource("DEFAULT_FULLPAGEVISIBLE")!="0",Z.progressVisible=this.getResource("DEFAULT_PROGRESSVISIBLE")!="0",Z.logoVisible=this.getResource("DEFAULT_LOGOVISIBLE")!="0",Z.logoCustomPath=this.getResource("DEFAULT_LOGOCUSTOMPATH"),Z.canvas=this.getResource("DEFAULT_CANVAS")!="0",Z.debug=this.getResource("DEFAULT_DEBUG")!="0";if(this.isStrVal(a))for(var e=0,f=a.length;e<f;e++){var g=a[e],h=g.indexOf("=");if(h>0){var i=g.substring(0,h),j=g.substring(h+1);if(this.isStrVal(j))switch(i){case"zInitialX":isNaN(parseFloat(j))||(Z.initialX=parseFloat(j));break;case"zInitialY":isNaN(parseFloat(j))||(Z.initialY=parseFloat(j));break;case"zInitialZoom":isNaN(parseFloat(j))||(Z.initialZ=parseFloat(j),Z.initialZ&&(Z.initialZ/=100));break;case"zMinZoom":!isNaN(parseFloat(j))&&parseFloat(j)>.01&&(Z.minZ=parseFloat(j),Z.minZ&&(Z.minZ/=100));break;case"zMaxZoom":isNaN(parseFloat(j))||(Z.maxZ=parseFloat(j),Z.maxZ&&(Z.maxZ/=100));break;case"zNavigatorVisible":Z.navigatorVisible=parseInt(j,10);break;case"zToolbarVisible":Z.toolbarVisible=parseInt(j,10);break;case"zLogoVisible":j=="0"&&(Z.logoVisible=!1);break;case"zSliderVisible":j=="0"&&(Z.sliderVisible=!1);break;case"zFullPageVisible":j=="0"&&(Z.fullPageVisible=!1);break;case"zProgressVisible":j=="0"&&(Z.progressVisible=!1);break;case"zTooltipsVisible":j=="0"&&(Z.tooltipsVisible=!1);break;case"zSkinPath":Z.skinPath=j;break;default:if(b==c)alert(d+" "+i);else switch(i){case"zZoomSpeed":Z.zoomSpeed=parseInt(j,10);break;case"zPanSpeed":Z.panSpeed=parseInt(j,10);break;case"zFadeInSpeed":Z.fadeInSpeed=parseInt(j,10);break;case"zToolbarPosition":Z.toolbarPosition=parseInt(j,10);break;case"zNavigatorWidth":isNaN(parseFloat(j))||(Z.navigatorW=parseFloat(j));break;case"zNavigatorHeight":isNaN(parseFloat(j))||(Z.navigatorH=parseFloat(j));break;case"zNavigatorLeft":isNaN(parseFloat(j))||(Z.navigatorL=parseFloat(j));break;case"zNavigatorTop":isNaN(parseFloat(j))||(Z.navigatorT=parseFloat(j));break;case"zNavigatorFit":isNaN(parseFloat(j))||(Z.navigatorFit=parseInt(j,10));break;case"zClickZoom":j=="0"&&(Z.clickZoom=!1);break;case"zClickPan":j=="0"&&(Z.clickPan=!1);break;case"zMousePan":j=="0"&&(Z.mousePan=!1);break;case"zKeys":j=="0"&&(Z.keys=!1);break;case"zConstrainPan":j=="0"&&(Z.constrainPan=!1);break;case"zCopyrightPath":Z.copyrightPath=j;break;case"zWatermarkPath":Z.watermarkPath=j;break;case"zLogoCustomPath":Z.logoCustomPath=j;break;case"zCanvas":j=="0"&&(Z.canvas=!1);if(!Z.canvasSupported||!Z.canvas)Z.useCanvas=!1;break;case"zDebug":j=="1"&&(Z.debug=!0)}}}}},removeDups:function(a){for(var b=1;b<a.length;)a[b-1]==a[b]?a.splice(b,1):b++;return a},intersect:function(a,b){var c=[];for(var d=0;d<a.length;d++){var e=a[d],f=!1;for(var g=0;g<b.length&&e>=(elmt2=b[g]);g++)if(elmt2==e){f=!0;break}f&&c.push(a[d])}return c},subtract:function(a,b){for(var c=0;c<a.length;c++){var d=a[c],e=!1;for(var f=0;f<b.length&&d>=(elmt2=b[f]);f++)if(elmt2==d){e=!0;break}e&&a.splice(c--,1)}return a},createCallback:function(a,b){var c=[];for(var d=2,e=arguments.length;d<e;d++)c.push(arguments[d]);return function(){var d=c.concat([]);for(var e=0,f=arguments.length;e<f;e++)d.push(arguments[e]);return b.apply(a,d)}},showMessage:function(a){alert(a)},createContainerElement:function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=document.createElement(a);this.isStrVal(b)&&(p.id=b);var q=p.style;return q.display=this.isStrVal(c)?c:"inline-block",q.position=this.isStrVal(d)?d:"static",q.overflow=this.isStrVal(e)?e:"hidden",a=="canvas"?(this.isStrVal(f)&&p.setAttribute("width",f),this.isStrVal(g)&&p.setAttribute("height",g)):(this.isStrVal(f)&&(q.width=f),this.isStrVal(g&&g)&&(q.height=g)),this.isStrVal(h)&&(q.left=h),this.isStrVal(i)&&(q.top=i),q.borderStyle=this.isStrVal(j)?j:"none",q.borderWidth=this.isStrVal(k)?k:"0px",q.background=this.isStrVal(l)?l:"transparent none",q.margin=this.isStrVal(m)?m:"0px",q.padding=this.isStrVal(n)?n:"0px",this.isStrVal(o)&&(q.cursor=o),p},createCenteredElement:function(a){var b=this.createContainerElement("div"),c=[];c.push('<div style="display:table; height:100%; width:100%;'),c.push("border:none; margin:0px; padding:0px;"),c.push('#position:relative; overflow:hidden; text-align:left;">'),c.push('<div style="#position:absolute; #top:50%; width:100%; '),c.push("border:none; margin:0px; padding:0px;"),c.push('display:table-cell; vertical-align:middle;">'),c.push('<div style="#position:relative; #top:-50%; width:100%; '),c.push("border:none; margin:0px; padding:0px;"),c.push('text-align:center;"></div></div></div>'),b.innerHTML=c.join(""),b=b.firstChild;var d=b,e=b.getElementsByTagName("div");while(e.length>0)d=e[0],e=d.getElementsByTagName("div");return d.appendChild(a),b},createGraphicElement:function(a){var b=this.createContainerElement("img"),c=null;return Z.browser==Z.browsers.IE&&Z.browserVersion<7?(c=this.createContainerElement("span",null,"inline-block"),b.onload=function(){c.style.width=c.style.width||b.width+"px",c.style.height=c.style.height||b.height+"px",b.onload=null,b=null},c.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+a+"', sizingMethod='scale')"):(c=b,c.src=a),c},setTextStyle:function(a,b,c,d,e,f,g,h,i,j,k,l){var m=a.parentNode.style;m.color=b,m.fontFamily=c,m.fontSize=d,m.fontSizeAdjust=e,m.fontStyle=f,m.fontStretch=g,m.fontVariant=h,m.fontWeight=i,m.lineHeight=j,m.textAlign=k,m.textDecoration=l},convertXMLTextToXMLDoc:function(a){var b=null;if(window.ActiveXObject)try{b=new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a)}catch(c){this.showMessage(c.name+this.getResource("ERROR_CONVERTINGXMLTEXTTODOC")+c.message)}else if(window.DOMParser)try{var d=new DOMParser;b=d.parseFromString(a,"text/xml")}catch(c){this.showMessage(c.name+this.getResource("ERROR_CONVERTINGXMLTEXTTODOC")+c.message)}else this.showMessage(this.getResource("ERROR_XMLDOMUNSUPPORTED"));return b},Point:function(a,b){this.x=typeof a=="number"?a:0,this.y=typeof b=="number"?b:0},Point3D:function(a,b,c){this.x=typeof a=="number"?a:0,this.y=typeof b=="number"?b:0,this.z=typeof c=="number"?c:0},getResource:function(a){var b="";switch(a){case"DEFAULT_PARAMETERSENABLETEST":b="Enable Developer parameters";break;case"DEFAULT_PARAMETERSDISABLEVALUE":b="Changing This Violates License Agreement";break;case"DEFAULT_PARAMETERSDISABLEDALERT":b="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Developer edition: ";break;case"DEFAULT_IMAGESLOADINGMAX":b="100";break;case"DEFAULT_TILEIMAGELOADTIMEOUT":b="30000";break;case"DEFAULT_TIERSMAXSCALEUP":b="1.15";break;case"DEFAULT_TILESMAXCACHE":b="300";break;case"DEFAULT_BACKFILLTHRESHOLD2":b="6";break;case"DEFAULT_BACKFILLTHRESHOLD1":b="3";break;case"DEFAULT_BACKFILLCHOICE2":b="3";break;case"DEFAULT_BACKFILLCHOICE1":b="2";break;case"DEFAULT_BACKFILLCHOICE0":b="0";break;case"DEFAULT_PANBUFFER":b="2";break;case"DEFAULT_PANSPEED":b="5";break;case"DEFAULT_PANSTEP":b="10";break;case"DEFAULT_ZOOMSPEED":b="5";break;case"DEFAULT_ZOOMSTEP":b="0.02";break;case"DEFAULT_ZOOMANDPANSTEPDURATION":b="30";break;case"DEFAULT_ZOOMANDPANTOVIEWDURATION":b="200";break;case"DEFAULT_ZOOMANDPANTOVIEWSTEPDURATION":b="10";break;case"DEFAULT_CLICKZOOMTIERSKIPTHRESHOLD":b="01.";break;case"DEFAULT_GESTURETESTDURATION":b="10";break;case"DEFAULT_FADEINSPEED":b="5";break;case"DEFAULT_FADEINSTEP":b="0.067";break;case"DEFAULT_TOOLBARVISIBLE":b="4";break;case"DEFAULT_TOOLBARPOSITION":b="1";break;case"DEFAULT_TOOLTIPSVISIBLE":b="1";break;case"DEFAULT_NAVIGATORVISIBLE":b="2";break;case"DEFAULT_NAVIGATORWIDTH":b="150";break;case"DEFAULT_NAVIGATORHEIGHT":b="100";break;case"DEFAULT_NAVIGATORLEFT":b="0";break;case"DEFAULT_NAVIGATORTOP":b="0";break;case"DEFAULT_NAVIGATORFIT":b=null;break;case"DEFAULT_NAVIGATORBACKCOLOR":b="#ffffff";break;case"DEFAULT_NAVIGATORBACKCOLORNOALPHA":b="#fbfafa";break;case"DEFAULT_NAVIGATORBACKALPHA":b="0.75";break;case"DEFAULT_NAVIGATORRECTANGLECOLOR":b="blue";break;case"DEFAULT_SKINXMLFILE":b="skinFiles.xml";break;case"DEFAULT_SKINXMLPATH":b="Assets/Skins/Default";break;case"DEFAULT_SKINMODE":b="0";break;case"DEFAULT_CONSTRAINPAN":b="1";break;case"DEFAULT_SLIDERVISIBLE":b="1";break;case"DEFAULT_SLIDERTESTDURATION":b="10";break;case"DEFAULT_FULLPAGEVISIBLE":b="1";break;case"DEFAULT_FULLPAGEBACKCOLOR":b="white";break;case"DEFAULT_FPCANCELBUTTONTEXT":b="X";break;case"DEFAULT_FPCANCELBUTTONCOLOR":b="\t#F8F8F8";break;case"DEFAULT_PROGRESSVISIBLE":b="1";break;case"DEFAULT_PROGRESSDURATION":b="500";break;case"DEFAULT_PROGRESSTEXT":b=" ";break;case"DEFAULT_LOGOVISIBLE":b="1";break;case"DEFAULT_LOGOCUSTOMPATH":b=null;break;case"DEFAULT_CANVAS":b="1";break;case"DEFAULT_DEBUG":b="0";break;case"DEFAULT_COPYRIGHTSCREENCOLOR":b="lightgray";break;case"DEFAULT_COPYRIGHTBUTTONCOLOR":b="white";break;case"DEFAULT_COPYRIGHTAGREEBUTTONTEXT":b="Agree";break;case"DEFAULT_COPYRIGHTEXITBUTTONTEXT":b="Exit";break;case"DEFAULT_WATERMARKALPHA":b="0.6";break;case"DEFAULT_WATERMARKMINSCALE":b="0.33";break;case"DEFAULT_WATERMARKSPANW":b="512";break;case"DEFAULT_WATERMARKSPANH":b="384";break;case"DEFAULT_INITIALX":b=null;break;case"DEFAULT_INITIALY":b=null;break;case"DEFAULT_INITIALZOOM":b=null;break;case"DEFAULT_MINZOOM":b=null;break;case"DEFAULT_MAXZOOM":b="1";break;case"DEFAULT_CLICKZOOM":b="1";break;case"DEFAULT_CLICKPAN":b="1";break;case"DEFAULT_MOUSEPAN":b="1";break;case"DEFAULT_KEYS":b="1";break;case"DEFAULT_TRACEDISPLAYDEBUGINFOTEXT":b="This panel is enabled using the HTML parameter 'zDebug=1'. It can be called as follows:\n\n   Z.Utils.trace('value to display');  \n\nThe buttons below display or modify important state values.  Web designers new to JavaScript will also benefit from the console, trace, profiling, and other debugging features of leading browsers.";break;case"DEFAULT_TRACEDISPLAYSCREENCOLOR":b="lightgray";break;case"DEFAULT_TRACEDISPLAYBUTTONCOLOR":b="white";break;case"DEFAULT_TRACEDISPLAYSHOWGLOBALSBUTTONTEXT":b="Show Globals";break;case"DEFAULT_TRACEDISPLAYTOGGLEDISPLAYBUTTONTEXT":b="Toggle Display";break;case"DEFAULT_TRACEDISPLAYTOGGLEBACKFILLBUTTONTEXT":b="Toggle Backfill";break;case"DEFAULT_TRACEDISPLAYTOGGLECONSTRAINPANBUTTONTEXT":b="Toggle Constrain Pan";break;case"ERROR_XMLHTTPREQUESTUNSUPPORTED":b="Browser does not support XMLHttpRequest.";break;case"ERROR_MAKINGNETWORKREQUEST-IMAGEXML":b="Error loading image: please make sure image path in web page matches image folder location on webserver.";break;case"ERROR_MAKINGNETWORKREQUEST-TOOLBARXML":b="Error loading toolbar: please verify skin files are on webserver in same folder as ZoomifyImageViewer.js file and are in default folder structure 'Assets/Skins/Default', or add zSkinPath parameter to webpage.";break;case"ERROR_MAKINGNETWORKREQUEST":b="Error making network request: possible invalid path or network error.";break;case"ERROR_IMAGEPATHINVALID":b="Image failed to load: possible invalid path, missing image, or network error.";break;case"ERROR_NETWORKSECURITY":b="Error related to network security: ";break;case"ERROR_NETWORKSTATUS":b="Error related to network status: ";break;case"ERROR_CONVERTINGXMLTEXTTODOC":b=" converting XML text to XML doc (DOMParser): ";break;case"ERROR_XMLDOMUNSUPPORTED":b="Browser does not support XML DOM.";break;case"ERROR_XMLINVALID":b="XML invalid.";break;case"ERROR_IMAGEXMLINVALID":b="Image XML invalid.";break;case"ERROR_EXECUTINGCALLBACK":b=" while executing callback: ";break;case"ERROR_IMAGEREQUESTTIMEDOUT":b="Image timed out: ";break;case"ERROR_NAVIGATORIMAGEPATHINVALID":b="Navigator image failed to load: possible invalid path, missing image, or network error.";break;case"ERROR_SKINXMLINVALID":b="Skin XML invalid.";break;case"ERROR_SKINXMLMISSINGNAMES":b="The skin XML file has one or more faulty name lines.";break;case"ERROR_WATERMARKPATHINVALID":b="Watermark image failed to load: ";break;case"ERROR_UNKNOWNELEMENTSTYLE":b="Unknown element style - no known method to identify.";break;case"ERROR_UNKNOWNMOUSEPOSITION":b="Unknown mouse position - no known method to calculate.";break;case"ERROR_UNKNOWNMOUSESCROLL":b="Unknown mouse scroll - no known method to calculate.";break;case"ERROR_UNKNOWNWINDOWSIZE":b="Unknown window size - no known method to calculate.";break;case"TIP_LOGO":b="Launch Zoomify Website";break;case"TIP_MINIMIZE":b="Minimize Toolbar";break;case"TIP_EXPAND":b="Expand Toolbar";break;case"TIP_ZOOMOUT":b="Zoom Out";break;case"TIP_SLIDER":b="Zoom In And Out";break;case"TIP_ZOOMIN":b="Zoom In";break;case"TIP_PANLEFT":b="Pan Left";break;case"TIP_PANUP":b="Pan Up";break;case"TIP_PANDOWN":b="Pan Down";break;case"TIP_PANRIGHT":b="Pan Right";break;case"TIP_RESET":b="Reset Initial View";break;case"TIP_TOGGLEFULLPAGE":b="Toggle Full Page View";break;case"TIP_CANCELFULLPAGE":b="Cancel Full Page View";break;case"TIP_COPYRIGHTAGREE":b="Agree to copyright and view images";break;case"TIP_COPYRIGHTEXIT":b="Exit and do not view images";break;case"TIP_SHOWGLOBALS":b="Toggle Full Page View";break;case"TIP_TOGGLEDISPLAY":b="Toggle Viewport Display";break;case"TIP_TOGGLEBACKFILL":b="Toggle Viewport Backfill";break;case"TIP_TOGGLECONSTRAINPAN":b="Toggle Constrain Pan";break;default:b="Unexpected resource request"}return b},showGlobals:function(){var a="";a+="\n",a+="                            ZOOMIFY IMAGE VIEWER - CURRENT VALUES\n",a+="\n",a+="IMAGE & SKIN:    ",a+="Z.imagePath="+Z.imagePath+",   ",a+="Z.skinPath="+Z.skinPath+",   ",a+="Z.skinMode="+Z.skinMode+",   ",a+="Z.imageW="+Z.imageW+",   ",a+="Z.imageH="+Z.imageH+",   ",a+="tierCount="+Z.Viewport.getTierCount()+",   ",a+="TILE_SIZE="+Z.Viewport.getTileSize()+"\n",a+="\n",a+="PAGE & BROWSER:    ",a+="Z.pageContainer="+Z.pageContainer+",   ",a+="Z.browser="+Z.browser+",   ",a+="Z.browserVersion="+Z.browserVersion+",   ",a+="Z.canvasSupported="+Z.canvasSupported+",   ",a+="Z.cssTransformsSupported="+Z.cssTransformsSupported+",   ",a+="Z.cssTransformProperty="+Z.cssTransformProperty+",   ",a+="Z.cssTransformNoUnits="+Z.cssTransformNoUnits+",   ",a+="Z.alphaSupported="+Z.alphaSupported+",   ",a+="Z.renderQuality="+Z.renderQuality+",   ",a+="Z.mobileDevice="+Z.mobileDevice+"\n",a+="\n",a+="VIEWER OPTIONS & DEFAULTS:    ",a+="Z.initialX="+Z.initialX+",   ",a+="Z.initialY="+Z.initialY+",   ",a+="Z.initialZ="+Z.initialZ+",   ",a+="Z.minZ="+Z.minZ+",   ",a+="Z.maxZ="+Z.maxZ+",   ",a+="Z.fitZ="+Z.fitZ+",   ",a+="Z.zoomSpeed="+Z.zoomSpeed+",   ",a+="Z.panSpeed="+Z.panSpeed+",   ",a+="Z.fadeInSpeed="+Z.fadeInSpeed+",   ",a+="Z.toolbarVisible="+Z.toolbarVisible+",   ",a+="Z.toolbarW="+Z.toolbarW+",   ",a+="Z.toolbarCurrentW="+Z.toolbarCurrentW+",   ",a+="Z.toolbarH="+Z.toolbarH+",   ",a+="Z.toolbarPosition="+Z.toolbarPosition+",   ",a+="Z.tooltipsVisible="+Z.tooltipsVisible+",   ",a+="Z.navigatorVisible="+Z.navigatorVisible+",   ",a+="Z.navigatorW="+Z.navigatorW+",   ",a+="Z.navigatorH="+Z.navigatorH+",   ",a+="Z.navigatorL="+Z.navigatorL+",   ",a+="Z.navigatorT="+Z.navigatorT+",   ",a+="Z.navigatorFit="+Z.navigatorFit+",   ",a+="Z.clickZoom="+Z.clickZoom+",   ",a+="Z.clickPan="+Z.clickPan+",   ",a+="Z.mousePan="+Z.mousePan+",   ",a+="Z.keys="+Z.keys+",   ",a+="Z.constrainPan="+Z.constrainPan+",   ",a+="Watermark alpha = "+Z.Utils.getResource("DEFAULT_WATERMARKALPHA")+",   ",a+="Z.watermarkPath="+Z.watermarkPath+",   ",a+="Z.copyrightPath="+Z.copyrightPath+",   ",a+="Z.sliderVisible="+Z.sliderVisible+",   ",a+="Z.fullPageVisible="+Z.fullPageVisible+",   ",a+="Z.progressVisible="+Z.progressVisible+",   ",a+="Z.logoVisible="+Z.logoVisible+",   ",a+="Z.logoCustomPath="+Z.logoCustomPath+",   ",a+="Z.canvas="+Z.canvas+"\n",a+="\n",a+="INTERNAL VALUES:    ",a+="\n",a+="displayW="+Z.Viewport.getW()+",   ",a+="displayH="+Z.Viewport.getH()+",   ",a+="tierCurrent="+Z.Viewport.getTierCurrent()+",   ",a+="tierScale="+Z.Viewport.getTierScale()+",   ",a+="TIERS_MAX_SCALE_UP="+Z.Viewport.getTiersMaxScaleUp()+",   ",a+="TIERS_MAX_SCALE_DOWN="+Z.Viewport.getTiersMaxScaleDown()+",   ",a+="TILES_MAX_CACHE="+Z.Viewport.getTilesMaxCache()+",   ",a+="Z.useCanvas="+Z.useCanvas+"\n",a+="\n",a+="INTERNAL LISTS:    ",a+="tierWs="+Z.Viewport.getTierWs()+",   ",a+="tierHs="+Z.Viewport.getTierHs()+",   ",a+="tierTileCounts="+Z.Viewport.getTierTileCounts()+",   ",a+="tilesLoadingNames="+Z.Viewport.getTilesLoadingNames()+"\n",a+="\n",alert(a)},showTraces:function(){Z.TraceDisplay?Z.TraceDisplay.display=="inline-block"?Z.TraceDisplay.display="none":Z.TraceDisplay.display="inline-block":Z.Utils.configureTraceDisplay()},configureTraceDisplay:function(){var a=Z.viewerW/3,b=Z.viewerH/3+45,c=10,d=parseFloat(Z.viewerH)/3,e=this.getResource("DEFAULT_TRACEDISPLAYSCREENCOLOR");Z.TraceDisplay=this.createContainerElement("div","TraceDisplay","inline-block","absolute","hidden",a+"px",b+"px",c+"px",d+"px","solid","1px",e,"0px","10px"),Z.ViewerDisplay.appendChild(Z.TraceDisplay),Z.traces=document.createElement("TEXTAREA");var f=Z.traces.style;f.width=a-15+"px",f.height=b-60+"px",f.fontFamily="verdana",f.fontSize="10px",f.border="solid",f.borderWidth="1px",f.padding="5px",f.resize="none",Z.traces.value="Trace Values\n",Z.TraceDisplay.appendChild(Z.traces);var g=58,h=42,i=20,j=b-h/2-10,k=10,l=this.getResource("DEFAULT_TRACEDISPLAYBUTTONCOLOR"),m=this.getResource("DEFAULT_TRACEDISPLAYSHOWGLOBALSBUTTONTEXT"),n=new this.Button("buttonShowGlobals",m,null,null,null,null,g+"px",h+"px",i+"px",j+"px","mousedown",this.showGlobals,"TIP_SHOWGLOBALS","solid","1px",l,"0px","0px");Z.TraceDisplay.appendChild(n.elmt),i+=g+k;var m=this.getResource("DEFAULT_TRACEDISPLAYTOGGLEDISPLAYBUTTONTEXT"),o=new this.Button("buttonToggleDisplay",m,null,null,null,null,g+"px",h+"px",i+"px",j+"px","mousedown",Z.Viewport.toggleDisplay,"TIP_TOGGLEDISPLAY","solid","1px",l,"0px","0px");Z.TraceDisplay.appendChild(o.elmt),i+=g+k;var m=this.getResource("DEFAULT_TRACEDISPLAYTOGGLEBACKFILLBUTTONTEXT"),p=new this.Button("buttonToggleBackfill",m,null,null,null,null,g+"px",h+"px",i+"px",j+"px","mousedown",Z.Viewport.toggleBackfill,"TIP_TOGGLEBACKFILL","solid","1px",l,"0px","0px");Z.TraceDisplay.appendChild(p.elmt),i+=g+k,g+=12;var m=this.getResource("DEFAULT_TRACEDISPLAYTOGGLECONSTRAINPANBUTTONTEXT"),q=new this.Button("buttonToggleConstrainPan",m,null,null,null,null,g+"px",h+"px",i+"px",j+"px","mousedown",Z.Viewport.toggleConstrainPan,"TIP_TOGGLECONSTRAINPAN","solid","1px",l,"0px","0px");Z.TraceDisplay.appendChild(q.elmt)},trace:function(a){Z.TraceDisplay||Z.Utils.configureTraceDisplay(),Z.traces&&(Z.traces.value+="\n"+a+"\n")}};